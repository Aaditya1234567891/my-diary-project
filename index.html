<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Journal Hub</title>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        /* Landing Page Styles */
        .landing-page {
            display: block;
            text-align: center;
            padding: 60px 40px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .landing-title {
            font-size: 3.5rem;
            font-weight: 300;
            margin: 0 0 20px 0;
            letter-spacing: 3px;
        }

        .landing-subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 50px;
            font-style: italic;
        }

        .landing-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 400px;
            margin: 0 auto;
        }

        .landing-btn {
            padding: 20px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        .landing-btn:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .landing-btn.primary {
            background: rgba(255, 255, 255, 0.9);
            color: #4facfe;
            border-color: white;
        }

        .landing-btn.primary:hover {
            background: white;
            transform: translateY(-3px) scale(1.02);
        }

        .landing-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(255, 255, 255, 0.1);
        }

        .landing-btn.disabled:hover {
            transform: none;
            background: rgba(255, 255, 255, 0.1);
            box-shadow: none;
        }

        .coming-soon {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-top: 5px;
            font-style: italic;
        }

        /* To-Do List Styles */
        .todo-app {
            display: none;
        }

        .productivity-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .dashboard-card h3 {
            margin: 0 0 10px 0;
            font-size: 1rem;
            opacity: 0.9;
        }

        .dashboard-card .number {
            font-size: 2rem;
            font-weight: bold;
            margin: 5px 0;
        }

        .streak-card {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        .progress-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .achievement-card {
            background: linear-gradient(135deg, #feca57 0%, #ff9ff3 100%);
        }

        .daily-goal-card {
            background: linear-gradient(135deg, #2ed573 0%, #7bed9f 100%);
        }

        .new-task-section {
            margin-bottom: 40px;
        }

        .new-task-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid #4facfe;
            padding-bottom: 10px;
        }

        .task-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .task-input-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 15px;
        }

        .task-input-row-2 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 15px;
        }

        .task-input {
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.1rem;
            font-family: 'Georgia', serif;
            transition: border-color 0.3s ease;
        }

        .task-input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .priority-select, .category-select, .time-estimate, .due-date {
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Georgia', serif;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .priority-select:focus, .category-select:focus, .time-estimate:focus, .due-date:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .task-notes {
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Georgia', serif;
            min-height: 80px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .task-notes:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .recurring-options {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .recurring-checkbox {
            margin-right: 8px;
        }

        .recurring-select {
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .tasks-section {
            margin-top: 40px;
        }

        .tasks-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .tasks-header h2 {
            color: #333;
            font-size: 1.5rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
            margin: 0;
        }

        .task-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
            border: 2px solid #e1e5e9;
        }

        .search-filter-section {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 25px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .view-toggle {
            display: flex;
            gap: 5px;
            background: #f8f9fa;
            border-radius: 25px;
            padding: 5px;
        }

        .view-btn {
            padding: 8px 15px;
            border: none;
            background: transparent;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .view-btn.active {
            background: #4facfe;
            color: white;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #e1e5e9;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #666;
        }

        .filter-btn:hover {
            border-color: #4facfe;
            color: #4facfe;
        }

        .filter-btn.active {
            background: #4facfe;
            border-color: #4facfe;
            color: white;
        }

        .bulk-actions {
            display: none;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid #e1e5e9;
        }

        .bulk-actions.show {
            display: flex;
        }

        .bulk-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .bulk-complete {
            background: #28a745;
            color: white;
        }

        .bulk-delete {
            background: #dc3545;
            color: white;
        }

        .bulk-export {
            background: #6c757d;
            color: white;
        }

        .task-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #4facfe;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            position: relative;
        }

        .task-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .task-item.completed {
            opacity: 0.7;
            border-left-color: #28a745;
            background: #f0f8f0;
        }

        .task-item.overdue {
            border-left-color: #dc3545;
            background: #fff5f5;
        }

        .task-item.due-today {
            border-left-color: #ffc107;
            background: #fffbf0;
        }

        .task-item.high-priority {
            border-left-color: #dc3545;
        }

        .task-item.medium-priority {
            border-left-color: #ffc107;
        }

        .task-item.low-priority {
            border-left-color: #28a745;
        }

        .task-item.selected {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .task-select {
            margin-top: 5px;
        }

        .task-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
            transform: scale(1.2);
            margin-top: 5px;
        }

        .task-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .task-text {
            font-size: 1.1rem;
            color: #333;
            line-height: 1.4;
            font-weight: 600;
        }

        .task-item.completed .task-text {
            text-decoration: line-through;
            color: #666;
        }

        .task-notes-display {
            font-size: 0.95rem;
            color: #666;
            line-height: 1.4;
            font-style: italic;
            margin-top: 5px;
        }

        .task-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.9rem;
            color: #666;
            flex-wrap: wrap;
        }

        .task-priority {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .priority-high {
            background: #ffe6e6;
            color: #dc3545;
        }

        .priority-medium {
            background: #fff8e1;
            color: #ffc107;
        }

        .priority-low {
            background: #e8f5e8;
            color: #28a745;
        }

        .task-category {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            background: #e3f2fd;
            color: #1976d2;
        }

        .task-due-date {
            font-weight: 600;
        }

        .task-due-date.overdue {
            color: #dc3545;
        }

        .task-due-date.due-today {
            color: #ffc107;
        }

        .task-time-estimate {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 8px;
            font-size: 0.8rem;
        }

        .task-date {
            font-style: italic;
        }

        .task-actions {
            display: flex;
            gap: 10px;
            flex-direction: column;
        }

        .task-delete-btn, .task-edit-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .task-edit-btn {
            background: #6c757d;
        }

        .task-delete-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .task-edit-btn:hover {
            background: #5a6268;
            transform: scale(1.1);
        }

        .subtasks {
            margin-top: 15px;
            padding-left: 20px;
            border-left: 2px solid #e1e5e9;
        }

        .subtask-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            font-size: 0.95rem;
        }

        .subtask-checkbox {
            width: 16px;
            height: 16px;
        }

        .subtask-text {
            flex: 1;
        }

        .subtask-item.completed .subtask-text {
            text-decoration: line-through;
            color: #666;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e1e5e9;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            transition: width 0.3s ease;
        }

        .no-tasks {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .achievements-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #feca57 0%, #ff9ff3 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.5s ease;
        }

        .achievements-popup.show {
            transform: translateX(0);
        }

        .achievement-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .achievement-desc {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Life Analytics App Styles */
        .life-analytics-app {
            display: none;
        }

        .analytics-overview {
            margin-bottom: 40px;
        }

        .analytics-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .analytics-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .analytics-card:hover {
            transform: translateY(-5px);
        }

        .analytics-card.mood-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .analytics-card.habits-card {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        .analytics-card.goals-card {
            background: linear-gradient(135deg, #2ed573 0%, #7bed9f 100%);
        }

        .analytics-card h3 {
            margin: 0 0 15px 0;
            font-size: 1rem;
            opacity: 0.9;
        }

        .analytics-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .analytics-trend {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .detailed-analytics {
            margin-top: 40px;
        }

        .analytics-section {
            margin-bottom: 50px;
        }

        .analytics-section h2 {
            color: #333;
            margin-bottom: 25px;
            font-size: 1.5rem;
            border-bottom: 2px solid #4facfe;
            padding-bottom: 10px;
        }

        .insight-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
        }

        .insight-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #4facfe;
            display: flex;
            gap: 20px;
            transition: transform 0.2s ease;
        }

        .insight-card:hover {
            transform: translateX(5px);
        }

        .insight-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .insight-content {
            flex: 1;
        }

        .insight-content h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 1.2rem;
        }

        .insight-content p {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* Chart Styles */
        .insight-chart {
            display: flex;
            align-items: end;
            gap: 8px;
            height: 80px;
            margin-top: 15px;
        }

        .chart-bar {
            background: linear-gradient(to top, #4facfe, #00f2fe);
            width: 20px;
            border-radius: 3px 3px 0 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .chart-bar:hover {
            background: linear-gradient(to top, #667eea, #764ba2);
        }

        .weekly-chart {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .day-bar {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .bar-fill {
            width: 25px;
            background: linear-gradient(to top, #4facfe, #00f2fe);
            border-radius: 3px 3px 0 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .bar-fill:hover {
            background: linear-gradient(to top, #667eea, #764ba2);
        }

        .day-bar span {
            font-size: 0.8rem;
            font-weight: 600;
            color: #666;
        }

        /* Mood Distribution */
        .mood-distribution {
            margin-top: 15px;
        }

        .mood-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .mood-emoji {
            font-size: 1.2rem;
            width: 30px;
        }

        .mood-bar-fill {
            height: 20px;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .mood-percent {
            font-size: 0.9rem;
            font-weight: 600;
            color: #666;
            min-width: 35px;
        }

        /* Mood Influencers */
        .influencer-list {
            margin-top: 15px;
        }

        .influencer-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            margin-bottom: 8px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #4facfe;
        }

        .influencer-item.positive {
            border-left-color: #28a745;
        }

        .influencer-item.negative {
            border-left-color: #dc3545;
        }

        .influencer-icon {
            font-size: 1.2rem;
        }

        .influencer-name {
            flex: 1;
            font-weight: 600;
            color: #333;
        }

        .influencer-impact {
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.9rem;
        }

        .influencer-item.positive .influencer-impact {
            background: #d4edda;
            color: #155724;
        }

        .influencer-item.negative .influencer-impact {
            background: #f8d7da;
            color: #721c24;
        }

        /* Habit Performance */
        .habit-performance {
            margin-top: 15px;
        }

        .performance-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .performance-label {
            min-width: 120px;
            font-weight: 600;
            color: #333;
        }

        .performance-bar {
            flex: 1;
            height: 20px;
            background: #e1e5e9;
            border-radius: 10px;
            overflow: hidden;
        }

        .performance-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            transition: width 0.3s ease;
        }

        .performance-value {
            min-width: 40px;
            font-weight: 600;
            color: #666;
            text-align: right;
        }

        /* Achievement Timeline */
        .achievement-timeline {
            margin-top: 15px;
        }

        .timeline-item {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #4facfe;
        }

        .timeline-date {
            min-width: 80px;
            font-size: 0.8rem;
            color: #666;
            font-weight: 600;
        }

        .timeline-content {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .timeline-icon {
            font-size: 1.2rem;
        }

        .timeline-text {
            color: #333;
            line-height: 1.4;
        }

        /* Recommendations */
        .recommendations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .recommendation-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #ffc107;
            display: flex;
            gap: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }

        .recommendation-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .recommendation-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .recommendation-content h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 1.1rem;
        }

        .recommendation-content p {
            color: #666;
            line-height: 1.5;
            margin: 0;
        }

        /* Diary App Styles */
        .diary-app, .mood-journal-app, .habit-tracker-app, .goal-planner-app, .gratitude-journal-app {
            display: none;
        }

        /* Mood Journal Styles */
        .mood-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .mood-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .mood-card.current-mood {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .mood-card.mood-streak {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        .mood-card.weekly-average {
            background: linear-gradient(135deg, #2ed573 0%, #7bed9f 100%);
        }

        .mood-display {
            font-size: 3rem;
            margin: 10px 0;
        }

        .mood-name {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .quick-mood-section {
            margin-bottom: 40px;
        }

        .quick-mood-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .quick-mood-btn {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 15px;
            padding: 20px 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            text-align: center;
            line-height: 1.4;
        }

        .quick-mood-btn:hover {
            border-color: #4facfe;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.2);
        }

        .quick-mood-btn.selected {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        .detailed-mood-section {
            margin-bottom: 40px;
        }

        .mood-factors {
            margin-bottom: 20px;
        }

        .factor-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .factor-tag {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 20px;
            padding: 8px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .factor-tag:hover {
            border-color: #4facfe;
        }

        .factor-tag.selected {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        .mood-notes {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            min-height: 120px;
            font-family: 'Georgia', serif;
            font-size: 1rem;
            resize: vertical;
            margin-bottom: 20px;
        }

        .energy-level-section {
            margin-bottom: 20px;
        }

        .energy-slider-container {
            margin-top: 15px;
        }

        .energy-slider {
            width: 100%;
            margin-bottom: 10px;
        }

        .energy-labels {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .view-controls {
            display: flex;
            gap: 5px;
        }

        .view-control-btn {
            padding: 8px 15px;
            border: 2px solid #e1e5e9;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .view-control-btn.active {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        /* Habit Tracker Styles */
        .habit-stats-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .habit-stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .habit-input-row {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .habit-input, .habit-category {
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Georgia', serif;
        }

        .habit-frequency {
            margin-bottom: 20px;
        }

        .frequency-options {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .frequency-options label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .habits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        /* Goal Planner Styles */
        .goals-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .goal-stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .goal-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.1rem;
            font-family: 'Georgia', serif;
            margin-bottom: 20px;
        }

        .goal-details-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .goal-category, .goal-timeframe, .goal-deadline {
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
        }

        .goal-description {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            min-height: 100px;
            font-family: 'Georgia', serif;
            font-size: 1rem;
            resize: vertical;
            margin-bottom: 20px;
        }

        .goal-milestones {
            margin-bottom: 20px;
        }

        .milestone-input {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .milestone-text {
            flex: 1;
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
        }

        .add-milestone-btn {
            padding: 10px 15px;
            background: #4facfe;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .goals-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .goal-filters {
            display: flex;
            gap: 10px;
        }

        .goal-filter-btn {
            padding: 8px 15px;
            border: 2px solid #e1e5e9;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .goal-filter-btn.active {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        /* Gratitude Journal Styles */
        .gratitude-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .gratitude-stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .gratitude-prompts {
            margin-bottom: 20px;
        }

        .gratitude-item {
            margin-bottom: 20px;
        }

        .gratitude-item label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .gratitude-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
        }

        .reflection-section {
            margin-bottom: 20px;
        }

        .reflection-section label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .reflection-textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            min-height: 100px;
            font-family: 'Georgia', serif;
            font-size: 1rem;
            resize: vertical;
        }

        .view-entries-section {
            text-align: center;
            margin: 40px 0;
        }

        .mood-entry-item, .gratitude-entry-item, .habit-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #4facfe;
            transition: transform 0.2s ease;
        }

        .mood-entry-item:hover, .gratitude-entry-item:hover, .habit-card:hover {
            transform: translateX(5px);
        }

        .mood-entry-header, .gratitude-entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .mood-entry-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mood-entry-emoji {
            font-size: 1.5rem;
        }

        .mood-entry-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        .mood-entry-actions, .gratitude-entry-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .mood-entry-date, .gratitude-entry-date {
            color: #666;
            font-size: 0.9rem;
            font-style: italic;
        }

        .mood-delete-btn, .gratitude-delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .mood-delete-btn:hover, .gratitude-delete-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .mood-factors-display, .mood-energy-display, .mood-notes-display, .gratitude-reflection-display {
            margin-bottom: 10px;
            color: #555;
            line-height: 1.5;
        }

        .habit-card {
            border-left-color: #28a745;
        }

        .habit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .habit-header h3 {
            margin: 0;
            color: #333;
            font-size: 1.2rem;
        }

        .habit-delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .habit-delete-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .habit-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .habit-category, .habit-frequency {
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .habit-stats {
            margin-bottom: 15px;
        }

        .habit-streak, .habit-completion-rate {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .habit-toggle-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e1e5e9;
        }

        .habit-toggle-btn.completed {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .habit-toggle-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .goal-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #ffc107;
            transition: transform 0.2s ease;
        }

        .goal-item:hover {
            transform: translateX(5px);
        }

        .goal-item.completed {
            border-left-color: #28a745;
            background: #f0f8f0;
        }

        .goal-item.overdue {
            border-left-color: #dc3545;
            background: #fff5f5;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .goal-header h3 {
            margin: 0;
            color: #333;
            font-size: 1.2rem;
        }

        .goal-actions {
            display: flex;
            gap: 10px;
        }

        .goal-toggle-btn, .goal-delete-btn {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .goal-delete-btn {
            background: #dc3545;
        }

        .goal-toggle-btn:hover {
            background: #5a6268;
            transform: scale(1.1);
        }

        .goal-delete-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .goal-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .goal-category, .goal-timeframe, .goal-deadline {
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .goal-deadline.overdue {
            background: #ffebee;
            color: #d32f2f;
        }

        .goal-description {
            color: #555;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .goal-progress {
            margin-top: 15px;
        }

        .progress-text {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .gratitude-items {
            margin-bottom: 15px;
        }

        .gratitude-item-display {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }

        .gratitude-icon {
            font-size: 1.2rem;
        }

        .gratitude-text {
            color: #333;
            line-height: 1.4;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .back-btn {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-50%) scale(1.1);
        }

        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-style: italic;
        }

        .content {
            padding: 40px;
        }

        .new-entry-section {
            margin-bottom: 40px;
        }

        .new-entry-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid #4facfe;
            padding-bottom: 10px;
        }

        .entry-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .entry-title {
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.1rem;
            font-family: 'Georgia', serif;
            transition: border-color 0.3s ease;
        }

        .entry-title:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .mood-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e1e5e9;
        }

        .mood-label {
            display: block;
            color: #333;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1rem;
            text-align: center;
        }

        .mood-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .mood-selector input[type="radio"] {
            display: none;
        }

        .mood-option {
            font-size: 2.5rem;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            background: white;
        }

        .mood-option:hover {
            transform: scale(1.1);
            background: rgba(79, 172, 254, 0.1);
            border-color: rgba(79, 172, 254, 0.3);
        }

        .mood-selector input[type="radio"]:checked + .mood-option {
            border-color: #4facfe;
            background: rgba(79, 172, 254, 0.2);
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.3);
        }

        .entry-textarea {
            padding: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            min-height: 200px;
            font-size: 1rem;
            font-family: 'Georgia', serif;
            line-height: 1.6;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .entry-textarea:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .entries-section {
            display: none;
        }

        .entries-section h2 {
            color: #333;
            margin-bottom: 30px;
            font-size: 1.5rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .entry-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #4facfe;
            transition: transform 0.2s ease;
        }

        .entry-item:hover {
            transform: translateX(5px);
        }

        .entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .entry-title-mood {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .entry-item-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin: 0;
        }

        .entry-mood {
            font-size: 1.5rem;
        }

        .entry-date {
            color: #666;
            font-size: 0.9rem;
            font-style: italic;
        }

        .entry-content {
            color: #555;
            line-height: 1.6;
            white-space: pre-wrap;
            margin-bottom: 15px;
        }

        .entry-footer {
            display: flex;
            justify-content: flex-end;
            padding-top: 10px;
            border-top: 1px solid #e1e5e9;
        }

        .no-entries {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #c3e6cb;
            display: none;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .btn-delete:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .entry-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .confirmation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .confirmation-box {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            text-align: center;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .confirmation-title {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .confirmation-message {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .confirmation-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .btn-confirm {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 80px;
        }

        .btn-yes {
            background: #dc3545;
            color: white;
        }

        .btn-yes:hover {
            background: #c82333;
            transform: translateY(-1px);
        }

        .btn-no {
            background: #6c757d;
            color: white;
        }

        .btn-no:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        @media (max-width: 768px) {
            body {
                padding: 5px;
            }

            .container {
                margin: 0;
                border-radius: 10px;
                min-height: 100vh;
            }
            
            .content {
                padding: 15px;
            }
            
            .header {
                padding: 15px;
                position: relative;
            }
            
            .header h1 {
                font-size: 1.8rem;
                margin: 0;
                padding-right: 50px;
            }

            .header p {
                font-size: 0.9rem;
                margin: 5px 0 0 0;
            }

            .back-btn {
                left: 10px;
                top: 15px;
                padding: 8px 10px;
                font-size: 1.1rem;
                transform: none;
            }

            .landing-page {
                padding: 30px 15px;
            }

            .landing-title {
                font-size: 2.2rem;
                letter-spacing: 1px;
            }

            .landing-subtitle {
                font-size: 1rem;
                margin-bottom: 40px;
            }

            .landing-buttons {
                max-width: 100%;
                gap: 15px;
            }

            .landing-btn {
                padding: 18px 25px;
                font-size: 1.1rem;
                letter-spacing: 1px;
            }

            /* Dashboard Cards */
            .productivity-dashboard,
            .mood-dashboard,
            .habit-stats-dashboard,
            .goals-dashboard,
            .gratitude-dashboard {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                margin-bottom: 25px;
            }

            .dashboard-card,
            .mood-card,
            .habit-stat-card,
            .goal-stat-card,
            .gratitude-stat-card {
                padding: 15px;
                text-align: center;
            }

            .dashboard-card h3,
            .mood-card h3,
            .habit-stat-card h3,
            .goal-stat-card h3,
            .gratitude-stat-card h3 {
                font-size: 0.9rem;
                margin-bottom: 8px;
            }

            .dashboard-card .number,
            .mood-card .number,
            .habit-stat-card .number,
            .goal-stat-card .number,
            .gratitude-stat-card .number {
                font-size: 1.8rem;
            }

            /* Form Layouts */
            .task-input-row {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .task-input-row-2 {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .habit-input-row,
            .goal-details-row {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .task-input,
            .priority-select,
            .category-select,
            .due-date,
            .time-estimate,
            .habit-input,
            .habit-category,
            .goal-input,
            .goal-category,
            .goal-timeframe,
            .goal-deadline {
                padding: 12px;
                font-size: 1rem;
            }

            .task-notes,
            .mood-notes,
            .goal-description,
            .reflection-textarea {
                padding: 12px;
                min-height: 80px;
                font-size: 1rem;
            }

            /* Search and Filters */
            .search-filter-section {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }

            .search-input {
                min-width: auto;
                padding: 12px 15px;
                font-size: 1rem;
            }

            .view-toggle {
                justify-content: center;
            }

            .view-btn {
                padding: 10px 15px;
                font-size: 1rem;
            }

            .filter-buttons {
                justify-content: center;
                gap: 8px;
            }

            .filter-btn,
            .goal-filter-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }

            /* Task Items */
            .task-item {
                padding: 15px;
                margin-bottom: 12px;
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }

            .task-content {
                order: 2;
            }

            .task-actions {
                order: 3;
                flex-direction: row;
                justify-content: flex-end;
                gap: 8px;
            }

            .task-checkbox {
                order: 1;
                align-self: flex-start;
                margin-bottom: 10px;
            }

            .task-select {
                order: 0;
                align-self: flex-start;
                margin-bottom: 5px;
            }

            .task-meta {
                flex-wrap: wrap;
                gap: 8px;
            }

            .task-priority,
            .task-category,
            .task-due-date,
            .task-time-estimate {
                font-size: 0.8rem;
                padding: 3px 8px;
            }

            /* Mood Journal */
            .quick-mood-selector {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }

            .quick-mood-btn {
                padding: 15px 8px;
                font-size: 0.9rem;
                line-height: 1.2;
            }

            .mood-selector {
                gap: 8px;
                justify-content: center;
                flex-wrap: wrap;
            }

            .mood-option {
                font-size: 2rem;
                width: 50px;
                height: 50px;
                padding: 5px;
            }

            .factor-tags {
                gap: 8px;
            }

            .factor-tag {
                padding: 6px 12px;
                font-size: 0.85rem;
            }

            /* Habit Tracker */
            .habits-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .habit-card,
            .goal-item,
            .mood-entry-item,
            .gratitude-entry-item {
                padding: 15px;
                margin-bottom: 15px;
            }

            .habit-header,
            .goal-header,
            .mood-entry-header,
            .gratitude-entry-header {
                flex-wrap: wrap;
                gap: 10px;
            }

            .habit-meta,
            .goal-meta {
                flex-wrap: wrap;
                gap: 8px;
            }

            /* Buttons */
            .button-group {
                flex-direction: column;
                gap: 12px;
            }
            
            .btn {
                width: 100%;
                padding: 15px 25px;
                font-size: 1rem;
            }

            .btn-primary,
            .btn-secondary {
                min-height: 50px;
            }

            /* Entry Items */
            .entry-item {
                padding: 15px;
                margin-bottom: 15px;
            }

            .entry-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .entry-actions,
            .mood-entry-actions,
            .gratitude-entry-actions {
                align-self: flex-end;
                flex-direction: row;
                align-items: center;
                gap: 10px;
            }

            .entry-date,
            .mood-entry-date,
            .gratitude-entry-date {
                font-size: 0.8rem;
            }

            /* Stats and Headers */
            .tasks-header,
            .goals-header {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }

            .task-stats {
                justify-content: center;
                flex-wrap: wrap;
                gap: 10px;
            }

            .stat-item {
                font-size: 0.85rem;
                padding: 6px 12px;
            }

            /* Bulk Actions */
            .bulk-actions {
                flex-wrap: wrap;
                gap: 8px;
                padding: 12px;
            }

            .bulk-btn {
                padding: 8px 12px;
                font-size: 0.9rem;
            }

            /* Frequency Options */
            .frequency-options {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            /* Recurring Options */
            .recurring-options {
                flex-wrap: wrap;
                gap: 8px;
            }

            /* View Controls */
            .view-controls,
            .goal-filters {
                flex-wrap: wrap;
                gap: 8px;
                justify-content: center;
            }

            .view-control-btn {
                padding: 8px 12px;
                font-size: 0.9rem;
            }

            /* Milestones */
            .milestone-input {
                flex-direction: column;
                gap: 8px;
            }

            .milestone-text {
                width: 100%;
            }

            .add-milestone-btn {
                align-self: flex-start;
                padding: 10px 20px;
            }

            /* Gratitude Items */
            .gratitude-item {
                margin-bottom: 15px;
            }

            .gratitude-input {
                padding: 12px;
                font-size: 1rem;
            }

            .gratitude-item-display {
                padding: 12px;
                margin-bottom: 8px;
            }

            /* Energy Slider */
            .energy-slider-container {
                margin-top: 10px;
            }

            .energy-labels {
                font-size: 0.85rem;
            }

            /* Confirmation Dialog */
            .confirmation-box {
                margin: 20px;
                padding: 25px;
                max-width: none;
                width: auto;
            }

            .confirmation-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .btn-confirm {
                width: 100%;
                padding: 12px 20px;
            }

            /* Achievement Popup */
            .achievements-popup {
                top: 10px;
                right: 10px;
                left: 10px;
                padding: 15px;
                transform: translateY(-100px);
            }

            .achievements-popup.show {
                transform: translateY(0);
            }

            /* No entries/tasks messages */
            .no-tasks,
            .no-entries {
                padding: 30px 20px;
                font-size: 1rem;
            }

            /* Success messages */
            .success-message {
                padding: 12px;
                font-size: 0.9rem;
                margin-bottom: 15px;
            }

            /* Analytics Mobile Styles */
            .analytics-cards {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .analytics-card {
                padding: 15px;
            }

            .analytics-card h3 {
                font-size: 0.9rem;
                margin-bottom: 10px;
            }

            .analytics-number {
                font-size: 2rem;
                margin: 8px 0;
            }

            .analytics-trend {
                font-size: 0.8rem;
            }

            .insight-cards {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .insight-card {
                padding: 15px;
                flex-direction: column;
                gap: 15px;
            }

            .insight-icon {
                font-size: 1.5rem;
                align-self: flex-start;
            }

            .insight-content h4 {
                font-size: 1.1rem;
                margin-bottom: 8px;
            }

            .insight-content p {
                font-size: 0.9rem;
                margin-bottom: 12px;
            }

            .insight-chart {
                height: 60px;
                gap: 6px;
            }

            .chart-bar {
                width: 15px;
            }

            .weekly-chart {
                gap: 10px;
            }

            .bar-fill {
                width: 20px;
            }

            .day-bar span {
                font-size: 0.7rem;
            }

            .mood-bar {
                gap: 8px;
                margin-bottom: 8px;
            }

            .mood-emoji {
                font-size: 1rem;
                width: 25px;
            }

            .mood-bar-fill {
                height: 16px;
            }

            .mood-percent {
                font-size: 0.8rem;
                min-width: 30px;
            }

            .influencer-item {
                padding: 8px;
                gap: 10px;
                margin-bottom: 6px;
            }

            .influencer-icon {
                font-size: 1rem;
            }

            .influencer-name {
                font-size: 0.9rem;
            }

            .influencer-impact {
                font-size: 0.8rem;
                padding: 3px 6px;
            }

            .performance-item {
                gap: 10px;
                margin-bottom: 12px;
            }

            .performance-label {
                min-width: 100px;
                font-size: 0.9rem;
            }

            .performance-bar {
                height: 16px;
            }

            .performance-value {
                min-width: 35px;
                font-size: 0.9rem;
            }

            .timeline-item {
                padding: 12px;
                gap: 12px;
                margin-bottom: 12px;
            }

            .timeline-date {
                min-width: 70px;
                font-size: 0.7rem;
            }

            .timeline-icon {
                font-size: 1rem;
            }

            .timeline-text {
                font-size: 0.9rem;
            }

            .recommendations {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .recommendation-card {
                padding: 15px;
                gap: 12px;
            }

            .recommendation-icon {
                font-size: 1.5rem;
            }

            .recommendation-content h4 {
                font-size: 1rem;
                margin-bottom: 8px;
            }

            .recommendation-content p {
                font-size: 0.9rem;
                line-height: 1.4;
            }

            /* Section headers */
            .new-entry-section h2,
            .new-task-section h2,
            .quick-mood-section h2,
            .detailed-mood-section h2,
            .new-habit-section h2,
            .new-goal-section h2,
            .daily-gratitude-section h2 {
                font-size: 1.3rem;
                margin-bottom: 15px;
            }

            /* Touch targets */
            .task-delete-btn,
            .task-edit-btn,
            .mood-delete-btn,
            .gratitude-delete-btn,
            .habit-delete-btn,
            .goal-toggle-btn,
            .goal-delete-btn,
            .btn-delete {
                min-width: 44px;
                min-height: 44px;
                width: 44px;
                height: 44px;
                font-size: 16px;
            }

            /* Checkboxes */
            .task-checkbox,
            .task-select,
            .subtask-checkbox {
                min-width: 20px;
                min-height: 20px;
                transform: scale(1.3);
            }

            /* Form labels */
            .mood-label,
            .gratitude-item label,
            .reflection-section label {
                font-size: 1rem;
                margin-bottom: 10px;
            }

            /* Progress bars */
            .progress-bar {
                height: 10px;
                margin-top: 8px;
            }

            /* Habit toggle button */
            .habit-toggle-btn {
                padding: 15px;
                font-size: 1rem;
                min-height: 50px;
            }
        }

        @media (max-width: 480px) {
            .landing-title {
                font-size: 1.8rem;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .productivity-dashboard,
            .mood-dashboard,
            .habit-stats-dashboard,
            .goals-dashboard,
            .gratitude-dashboard {
                grid-template-columns: 1fr;
            }

            .quick-mood-selector {
                grid-template-columns: repeat(3, 1fr);
            }

            .mood-selector {
                gap: 5px;
            }

            .mood-option {
                font-size: 1.8rem;
                width: 45px;
                height: 45px;
            }

            .task-input-row-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Landing Page -->
        <div class="landing-page" id="landingPage">
            <h1 class="landing-title">📚 Personal Journal Hub</h1>
            <p class="landing-subtitle">Your digital space for thoughts, memories, and reflections</p>
            
            <div class="landing-buttons">
                <button class="landing-btn primary" id="myDiaryBtn">
                    📖 My Diary
                </button>
                
                <button class="landing-btn primary" id="todoBtn">
                    ✅ To-Do List
                </button>
                
                <button class="landing-btn primary" id="moodJournalBtn">
                    💭 Mood Journal
                </button>
                
                <button class="landing-btn primary" id="habitTrackerBtn">
                    📊 Habit Tracker
                </button>
                
                <button class="landing-btn primary" id="goalPlannerBtn">
                    🎯 Goal Planner
                </button>
                
                <button class="landing-btn primary" id="gratitudeJournalBtn">
                    🙏 Gratitude Journal
                </button>
                
                <button class="landing-btn primary" id="lifeAnalyticsBtn">
                    📈 Life Analytics
                </button>
            </div>
        </div>

        <!-- To-Do List App -->
        <div class="todo-app" id="todoApp" style="display: none;">
            <div class="header">
                <button class="back-btn" id="todoBackBtn" title="Back to Home">←</button>
                <h1>✅ My To-Do List</h1>
                <p>Stay organized and get things done</p>
            </div>
            
            <div class="content">
                <div class="success-message" id="todoSuccessMessage">
                    ✅ Task updated successfully!
                </div>

                <!-- Productivity Dashboard -->
                <div class="productivity-dashboard">
                    <div class="dashboard-card streak-card">
                        <h3>🔥 Current Streak</h3>
                        <div class="number" id="streakCount">0</div>
                        <div>days</div>
                    </div>
                    <div class="dashboard-card progress-card">
                        <h3>📈 Today's Progress</h3>
                        <div class="number" id="todayProgress">0%</div>
                        <div id="todayTasksCount">0/0 tasks</div>
                    </div>
                    <div class="dashboard-card achievement-card">
                        <h3>🏆 Achievements</h3>
                        <div class="number" id="achievementCount">0</div>
                        <div>unlocked</div>
                    </div>
                    <div class="dashboard-card daily-goal-card">
                        <h3>🎯 Daily Goal</h3>
                        <div class="number" id="dailyGoal">5</div>
                        <div>tasks</div>
                    </div>
                </div>
                
                <div class="new-task-section">
                    <h2>➕ Add New Task</h2>
                    <form class="task-form" id="taskForm">
                        <div class="task-input-row">
                            <input 
                                type="text" 
                                class="task-input" 
                                id="taskInput" 
                                placeholder="What do you need to do?"
                                required
                                maxlength="200"
                            >
                            <select class="priority-select" id="prioritySelect">
                                <option value="low">🟢 Low Priority</option>
                                <option value="medium" selected>🟡 Medium Priority</option>
                                <option value="high">🔴 High Priority</option>
                            </select>
                            <select class="category-select" id="categorySelect">
                                <option value="personal">👤 Personal</option>
                                <option value="work">💼 Work</option>
                                <option value="shopping">🛒 Shopping</option>
                                <option value="health">🏥 Health</option>
                                <option value="learning">📚 Learning</option>
                                <option value="other">📋 Other</option>
                            </select>
                        </div>
                        <div class="task-input-row-2">
                            <input 
                                type="date" 
                                class="due-date" 
                                id="dueDateInput"
                                title="Due Date"
                            >
                            <select class="time-estimate" id="timeEstimate">
                                <option value="">⏱️ Time estimate</option>
                                <option value="15min">15 minutes</option>
                                <option value="30min">30 minutes</option>
                                <option value="1hr">1 hour</option>
                                <option value="2hr">2 hours</option>
                                <option value="4hr">4 hours</option>
                                <option value="1day">1 day</option>
                            </select>
                            <div class="recurring-options">
                                <input type="checkbox" id="recurringTask" class="recurring-checkbox">
                                <label for="recurringTask">🔄 Repeat</label>
                            </div>
                            <select class="recurring-select" id="recurringSelect" disabled>
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                        <textarea 
                            class="task-notes" 
                            id="taskNotes" 
                            placeholder="Add notes, links, or details..."
                        ></textarea>
                        <button type="submit" class="btn btn-primary">➕ Add Task</button>
                    </form>
                </div>
                
                <div class="tasks-section">
                    <div class="tasks-header">
                        <h2>📋 Your Tasks</h2>
                        <div class="task-stats" id="taskStats">
                            <span class="stat-item">📝 <span id="totalTasks">0</span> Total</span>
                            <span class="stat-item">✅ <span id="completedTasks">0</span> Done</span>
                            <span class="stat-item">⏳ <span id="pendingTasks">0</span> Pending</span>
                            <span class="stat-item">🔥 <span id="overdueTasks">0</span> Overdue</span>
                        </div>
                    </div>

                    <div class="search-filter-section">
                        <input 
                            type="text" 
                            class="search-input" 
                            id="searchInput" 
                            placeholder="🔍 Search tasks..."
                        >
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="all">All</button>
                            <button class="view-btn" data-view="today">Today</button>
                            <button class="view-btn" data-view="week">This Week</button>
                        </div>
                    </div>
                    
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">All Tasks</button>
                        <button class="filter-btn" data-filter="pending">Pending</button>
                        <button class="filter-btn" data-filter="completed">Completed</button>
                        <button class="filter-btn" data-filter="overdue">Overdue</button>
                        <button class="filter-btn" data-filter="personal">👤 Personal</button>
                        <button class="filter-btn" data-filter="work">💼 Work</button>
                        <button class="filter-btn" data-filter="shopping">🛒 Shopping</button>
                    </div>

                    <div class="bulk-actions" id="bulkActions">
                        <span>Selected: <span id="selectedCount">0</span> tasks</span>
                        <button class="bulk-btn bulk-complete" id="bulkComplete">✅ Complete All</button>
                        <button class="bulk-btn bulk-delete" id="bulkDelete">🗑️ Delete All</button>
                        <button class="bulk-btn bulk-export" id="bulkExport">📄 Export</button>
                    </div>
                    
                    <div id="tasksList"></div>
                </div>
            </div>
        </div>

        <!-- Mood Journal App -->
        <div class="mood-journal-app" id="moodJournalApp" style="display: none;">
            <div class="header">
                <button class="back-btn" id="moodBackBtn" title="Back to Home">←</button>
                <h1>💭 Mood Journal</h1>
                <p>Track your emotions and discover patterns</p>
            </div>
            
            <div class="content">
                <div class="success-message" id="moodSuccessMessage">
                    ✅ Mood entry saved successfully!
                </div>

                <!-- Mood Dashboard -->
                <div class="mood-dashboard">
                    <div class="mood-card current-mood">
                        <h3>😊 Current Mood</h3>
                        <div class="mood-display" id="currentMoodDisplay">😐</div>
                        <div class="mood-name" id="currentMoodName">Neutral</div>
                    </div>
                    <div class="mood-card mood-streak">
                        <h3>🔥 Tracking Streak</h3>
                        <div class="number" id="moodStreak">0</div>
                        <div>days</div>
                    </div>
                    <div class="mood-card weekly-average">
                        <h3>📊 Weekly Average</h3>
                        <div class="mood-display" id="weeklyMood">😊</div>
                        <div class="mood-name" id="weeklyMoodName">Good</div>
                    </div>
                </div>

                <!-- Quick Mood Entry -->
                <div class="quick-mood-section">
                    <h2>🎭 How are you feeling right now?</h2>
                    <div class="quick-mood-selector">
                        <button class="quick-mood-btn" data-mood="amazing" data-emoji="😄" data-name="Amazing">😄<br>Amazing</button>
                        <button class="quick-mood-btn" data-mood="happy" data-emoji="😊" data-name="Happy">😊<br>Happy</button>
                        <button class="quick-mood-btn" data-mood="good" data-emoji="🙂" data-name="Good">🙂<br>Good</button>
                        <button class="quick-mood-btn" data-mood="neutral" data-emoji="😐" data-name="Neutral">😐<br>Neutral</button>
                        <button class="quick-mood-btn" data-mood="meh" data-emoji="😕" data-name="Meh">😕<br>Meh</button>
                        <button class="quick-mood-btn" data-mood="sad" data-emoji="😔" data-name="Sad">😔<br>Sad</button>
                        <button class="quick-mood-btn" data-mood="terrible" data-emoji="😢" data-name="Terrible">😢<br>Terrible</button>
                    </div>
                </div>

                <!-- Detailed Mood Entry -->
                <div class="detailed-mood-section">
                    <h2>📝 Add Details (Optional)</h2>
                    <form class="mood-form" id="moodForm">
                        <div class="mood-factors">
                            <h3>What's influencing your mood?</h3>
                            <div class="factor-tags">
                                <button type="button" class="factor-tag" data-factor="work">💼 Work</button>
                                <button type="button" class="factor-tag" data-factor="relationships">❤️ Relationships</button>
                                <button type="button" class="factor-tag" data-factor="health">🏥 Health</button>
                                <button type="button" class="factor-tag" data-factor="weather">🌤️ Weather</button>
                                <button type="button" class="factor-tag" data-factor="sleep">😴 Sleep</button>
                                <button type="button" class="factor-tag" data-factor="exercise">🏃 Exercise</button>
                                <button type="button" class="factor-tag" data-factor="food">🍎 Food</button>
                                <button type="button" class="factor-tag" data-factor="social">👥 Social</button>
                                <button type="button" class="factor-tag" data-factor="stress">😰 Stress</button>
                                <button type="button" class="factor-tag" data-factor="achievement">🏆 Achievement</button>
                            </div>
                        </div>
                        
                        <textarea 
                            class="mood-notes" 
                            id="moodNotes" 
                            placeholder="What happened today? How are you feeling? Any thoughts you'd like to capture..."
                        ></textarea>
                        
                        <div class="energy-level-section">
                            <h3>⚡ Energy Level</h3>
                            <div class="energy-slider-container">
                                <input type="range" class="energy-slider" id="energySlider" min="1" max="10" value="5">
                                <div class="energy-labels">
                                    <span>😴 Low</span>
                                    <span id="energyValue">5</span>
                                    <span>⚡ High</span>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">💾 Save Mood Entry</button>
                    </form>
                </div>

                <!-- View Past Entries Button -->
                <div class="view-entries-section">
                    <button type="button" class="btn btn-secondary" id="viewMoodHistoryBtn">📈 View Past Entries</button>
                </div>

                <!-- Mood History -->
                <div class="mood-history-section" id="moodHistorySection" style="display: none;">
                    <div class="section-header">
                        <h2>📈 Mood History</h2>
                        <div class="view-controls">
                            <button class="view-control-btn active" data-view="week">Week</button>
                            <button class="view-control-btn" data-view="month">Month</button>
                            <button class="view-control-btn" data-view="all">All</button>
                        </div>
                    </div>
                    
                    <div class="mood-chart" id="moodChart">
                        <!-- Mood visualization will be rendered here -->
                    </div>
                    
                    <div class="mood-entries-list" id="moodEntriesList">
                        <!-- Mood entries will be rendered here -->
                    </div>
                    
                    <div class="button-group" style="margin-top: 30px;">
                        <button type="button" class="btn btn-primary" id="newMoodEntryBtn">💭 Add New Entry</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Habit Tracker App -->
        <div class="habit-tracker-app" id="habitTrackerApp" style="display: none;">
            <div class="header">
                <button class="back-btn" id="habitBackBtn" title="Back to Home">←</button>
                <h1>📊 Habit Tracker</h1>
                <p>Build better habits, one day at a time</p>
            </div>
            
            <div class="content">
                <div class="success-message" id="habitSuccessMessage">
                    ✅ Habit updated successfully!
                </div>

                <!-- Habit Stats Dashboard -->
                <div class="habit-stats-dashboard">
                    <div class="habit-stat-card">
                        <h3>🎯 Active Habits</h3>
                        <div class="number" id="activeHabitsCount">0</div>
                    </div>
                    <div class="habit-stat-card">
                        <h3>🔥 Best Streak</h3>
                        <div class="number" id="bestStreak">0</div>
                        <div>days</div>
                    </div>
                    <div class="habit-stat-card">
                        <h3>📈 Completion Rate</h3>
                        <div class="number" id="completionRate">0%</div>
                    </div>
                </div>

                <!-- Add New Habit -->
                <div class="new-habit-section">
                    <h2>➕ Add New Habit</h2>
                    <form class="habit-form" id="habitForm">
                        <div class="habit-input-row">
                            <input type="text" class="habit-input" id="habitInput" placeholder="What habit do you want to build?" required>
                            <select class="habit-category" id="habitCategory">
                                <option value="health">🏥 Health</option>
                                <option value="fitness">💪 Fitness</option>
                                <option value="productivity">⚡ Productivity</option>
                                <option value="learning">📚 Learning</option>
                                <option value="mindfulness">🧘 Mindfulness</option>
                                <option value="social">👥 Social</option>
                                <option value="creative">🎨 Creative</option>
                                <option value="other">📋 Other</option>
                            </select>
                        </div>
                        <div class="habit-frequency">
                            <label>🔄 Frequency:</label>
                            <div class="frequency-options">
                                <label><input type="radio" name="frequency" value="daily" checked> Daily</label>
                                <label><input type="radio" name="frequency" value="weekly"> Weekly</label>
                                <label><input type="radio" name="frequency" value="custom"> Custom</label>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">➕ Add Habit</button>
                    </form>
                </div>

                <!-- View Past Entries Button -->
                <div class="view-entries-section">
                    <button type="button" class="btn btn-secondary" id="viewHabitsBtn">📋 View Your Habits</button>
                </div>

                <!-- Habits Grid -->
                <div class="habits-section" id="habitsSection" style="display: none;">
                    <h2>📋 Your Habits</h2>
                    <div class="habits-grid" id="habitsGrid">
                        <!-- Habits will be rendered here -->
                    </div>
                    
                    <div class="button-group" style="margin-top: 30px;">
                        <button type="button" class="btn btn-primary" id="newHabitEntryBtn">📊 Add New Habit</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Goal Planner App -->
        <div class="goal-planner-app" id="goalPlannerApp" style="display: none;">
            <div class="header">
                <button class="back-btn" id="goalBackBtn" title="Back to Home">←</button>
                <h1>🎯 Goal Planner</h1>
                <p>Set, track, and achieve your dreams</p>
            </div>
            
            <div class="content">
                <div class="success-message" id="goalSuccessMessage">
                    ✅ Goal updated successfully!
                </div>

                <!-- Goals Dashboard -->
                <div class="goals-dashboard">
                    <div class="goal-stat-card">
                        <h3>🎯 Active Goals</h3>
                        <div class="number" id="activeGoalsCount">0</div>
                    </div>
                    <div class="goal-stat-card">
                        <h3>✅ Completed</h3>
                        <div class="number" id="completedGoalsCount">0</div>
                    </div>
                    <div class="goal-stat-card">
                        <h3>📈 Success Rate</h3>
                        <div class="number" id="goalSuccessRate">0%</div>
                    </div>
                </div>

                <!-- Add New Goal -->
                <div class="new-goal-section">
                    <h2>🌟 Create New Goal</h2>
                    <form class="goal-form" id="goalForm">
                        <input type="text" class="goal-input" id="goalTitle" placeholder="What do you want to achieve?" required>
                        
                        <div class="goal-details-row">
                            <select class="goal-category" id="goalCategory">
                                <option value="career">💼 Career</option>
                                <option value="health">🏥 Health</option>
                                <option value="learning">📚 Learning</option>
                                <option value="financial">💰 Financial</option>
                                <option value="relationships">❤️ Relationships</option>
                                <option value="personal">👤 Personal</option>
                                <option value="creative">🎨 Creative</option>
                                <option value="travel">✈️ Travel</option>
                            </select>
                            
                            <select class="goal-timeframe" id="goalTimeframe">
                                <option value="week">📅 This Week</option>
                                <option value="month">📅 This Month</option>
                                <option value="quarter">📅 This Quarter</option>
                                <option value="year">📅 This Year</option>
                                <option value="longterm">📅 Long-term</option>
                            </select>
                            
                            <input type="date" class="goal-deadline" id="goalDeadline">
                        </div>
                        
                        <textarea class="goal-description" id="goalDescription" placeholder="Describe your goal in detail. What does success look like?"></textarea>
                        
                        <div class="goal-milestones">
                            <h3>🏁 Milestones</h3>
                            <div id="milestonesContainer">
                                <div class="milestone-input">
                                    <input type="text" placeholder="Add a milestone..." class="milestone-text">
                                    <button type="button" class="add-milestone-btn">+</button>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">🎯 Create Goal</button>
                    </form>
                </div>

                <!-- View Past Entries Button -->
                <div class="view-entries-section">
                    <button type="button" class="btn btn-secondary" id="viewGoalsBtn">🎯 View Your Goals</button>
                </div>

                <!-- Goals List -->
                <div class="goals-section" id="goalsSection" style="display: none;">
                    <div class="goals-header">
                        <h2>📋 Your Goals</h2>
                        <div class="goal-filters">
                            <button class="goal-filter-btn active" data-filter="all">All</button>
                            <button class="goal-filter-btn" data-filter="active">Active</button>
                            <button class="goal-filter-btn" data-filter="completed">Completed</button>
                            <button class="goal-filter-btn" data-filter="overdue">Overdue</button>
                        </div>
                    </div>
                    <div class="goals-list" id="goalsList">
                        <!-- Goals will be rendered here -->
                    </div>
                    
                    <div class="button-group" style="margin-top: 30px;">
                        <button type="button" class="btn btn-primary" id="newGoalEntryBtn">🌟 Create New Goal</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gratitude Journal App -->
        <div class="gratitude-journal-app" id="gratitudeJournalApp" style="display: none;">
            <div class="header">
                <button class="back-btn" id="gratitudeBackBtn" title="Back to Home">←</button>
                <h1>🙏 Gratitude Journal</h1>
                <p>Cultivate appreciation and positive thinking</p>
            </div>
            
            <div class="content">
                <div class="success-message" id="gratitudeSuccessMessage">
                    ✅ Gratitude entry saved successfully!
                </div>

                <!-- Gratitude Dashboard -->
                <div class="gratitude-dashboard">
                    <div class="gratitude-stat-card">
                        <h3>🙏 Total Entries</h3>
                        <div class="number" id="gratitudeEntriesCount">0</div>
                    </div>
                    <div class="gratitude-stat-card">
                        <h3>🔥 Current Streak</h3>
                        <div class="number" id="gratitudeStreak">0</div>
                        <div>days</div>
                    </div>
                    <div class="gratitude-stat-card">
                        <h3>✨ Positive Vibes</h3>
                        <div class="number" id="positiveVibes">0</div>
                        <div>collected</div>
                    </div>
                </div>

                <!-- Daily Gratitude -->
                <div class="daily-gratitude-section">
                    <h2>✨ Today's Gratitude</h2>
                    <form class="gratitude-form" id="gratitudeForm">
                        <div class="gratitude-prompts">
                            <div class="gratitude-item">
                                <label>🌟 I'm grateful for...</label>
                                <input type="text" class="gratitude-input" id="gratitude1" placeholder="Something you're thankful for today">
                            </div>
                            <div class="gratitude-item">
                                <label>💝 Someone who made my day better...</label>
                                <input type="text" class="gratitude-input" id="gratitude2" placeholder="A person you appreciate">
                            </div>
                            <div class="gratitude-item">
                                <label>🎉 A small win I had today...</label>
                                <input type="text" class="gratitude-input" id="gratitude3" placeholder="An achievement, no matter how small">
                            </div>
                        </div>
                        
                        <div class="reflection-section">
                            <label>💭 Reflection</label>
                            <textarea class="reflection-textarea" id="gratitudeReflection" placeholder="How did practicing gratitude make you feel? Any insights or thoughts?"></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">🙏 Save Gratitude Entry</button>
                    </form>
                </div>

                <!-- View Past Entries Button -->
                <div class="view-entries-section">
                    <button type="button" class="btn btn-secondary" id="viewGratitudeHistoryBtn">📚 View Past Entries</button>
                </div>

                <!-- Gratitude History -->
                <div class="gratitude-history-section" id="gratitudeHistorySection" style="display: none;">
                    <h2>📚 Gratitude History</h2>
                    <div class="gratitude-entries" id="gratitudeEntries">
                        <!-- Gratitude entries will be rendered here -->
                    </div>
                    
                    <div class="button-group" style="margin-top: 30px;">
                        <button type="button" class="btn btn-primary" id="newGratitudeEntryBtn">🙏 Add New Entry</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Life Analytics App -->
        <div class="life-analytics-app" id="lifeAnalyticsApp" style="display: none;">
            <div class="header">
                <button class="back-btn" id="analyticsBackBtn" title="Back to Home">←</button>
                <h1>📈 Life Analytics</h1>
                <p>Insights and patterns from your personal data</p>
            </div>
            
            <div class="content">
                <!-- Overview Dashboard -->
                <div class="analytics-overview">
                    <h2>📊 Overview Dashboard</h2>
                    <div class="analytics-cards">
                        <div class="analytics-card productivity-card">
                            <h3>⚡ Productivity Score</h3>
                            <div class="analytics-number" id="productivityScore">85%</div>
                            <div class="analytics-trend" id="productivityTrend">↗️ +5% this week</div>
                        </div>
                        <div class="analytics-card mood-card">
                            <h3>😊 Average Mood</h3>
                            <div class="analytics-number" id="averageMood">7.2/10</div>
                            <div class="analytics-trend" id="moodTrend">😊 Positive trend</div>
                        </div>
                        <div class="analytics-card habits-card">
                            <h3>🎯 Habit Success</h3>
                            <div class="analytics-number" id="habitSuccess">73%</div>
                            <div class="analytics-trend" id="habitTrend">🔥 3-day streak</div>
                        </div>
                        <div class="analytics-card goals-card">
                            <h3>🏆 Goal Progress</h3>
                            <div class="analytics-number" id="goalProgress">4/7</div>
                            <div class="analytics-trend" id="goalTrend">🎯 On track</div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Analytics -->
                <div class="detailed-analytics">
                    <div class="analytics-section">
                        <h2>📈 Productivity Insights</h2>
                        <div class="insight-cards">
                            <div class="insight-card">
                                <div class="insight-icon">⏰</div>
                                <div class="insight-content">
                                    <h4>Peak Productivity Hours</h4>
                                    <p>You're most productive between <strong>9 AM - 11 AM</strong></p>
                                    <div class="insight-chart" id="productivityChart">
                                        <div class="chart-bar" style="height: 60%;" title="6 AM"></div>
                                        <div class="chart-bar" style="height: 75%;" title="7 AM"></div>
                                        <div class="chart-bar" style="height: 85%;" title="8 AM"></div>
                                        <div class="chart-bar" style="height: 95%;" title="9 AM"></div>
                                        <div class="chart-bar" style="height: 100%;" title="10 AM"></div>
                                        <div class="chart-bar" style="height: 90%;" title="11 AM"></div>
                                        <div class="chart-bar" style="height: 70%;" title="12 PM"></div>
                                        <div class="chart-bar" style="height: 65%;" title="1 PM"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-icon">📅</div>
                                <div class="insight-content">
                                    <h4>Weekly Patterns</h4>
                                    <p><strong>Tuesday & Wednesday</strong> are your most productive days</p>
                                    <div class="weekly-chart" id="weeklyChart">
                                        <div class="day-bar">
                                            <div class="bar-fill" style="height: 70%;" title="Monday"></div>
                                            <span>M</span>
                                        </div>
                                        <div class="day-bar">
                                            <div class="bar-fill" style="height: 95%;" title="Tuesday"></div>
                                            <span>T</span>
                                        </div>
                                        <div class="day-bar">
                                            <div class="bar-fill" style="height: 90%;" title="Wednesday"></div>
                                            <span>W</span>
                                        </div>
                                        <div class="day-bar">
                                            <div class="bar-fill" style="height: 75%;" title="Thursday"></div>
                                            <span>T</span>
                                        </div>
                                        <div class="day-bar">
                                            <div class="bar-fill" style="height: 65%;" title="Friday"></div>
                                            <span>F</span>
                                        </div>
                                        <div class="day-bar">
                                            <div class="bar-fill" style="height: 45%;" title="Saturday"></div>
                                            <span>S</span>
                                        </div>
                                        <div class="day-bar">
                                            <div class="bar-fill" style="height: 40%;" title="Sunday"></div>
                                            <span>S</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-section">
                        <h2>💭 Mood Analytics</h2>
                        <div class="insight-cards">
                            <div class="insight-card">
                                <div class="insight-icon">📊</div>
                                <div class="insight-content">
                                    <h4>Mood Distribution</h4>
                                    <p>Your emotional patterns over the last 30 days</p>
                                    <div class="mood-distribution" id="moodDistribution">
                                        <div class="mood-bar">
                                            <span class="mood-emoji">😄</span>
                                            <div class="mood-bar-fill" style="width: 25%;" title="Amazing: 25%"></div>
                                            <span class="mood-percent">25%</span>
                                        </div>
                                        <div class="mood-bar">
                                            <span class="mood-emoji">😊</span>
                                            <div class="mood-bar-fill" style="width: 35%;" title="Happy: 35%"></div>
                                            <span class="mood-percent">35%</span>
                                        </div>
                                        <div class="mood-bar">
                                            <span class="mood-emoji">🙂</span>
                                            <div class="mood-bar-fill" style="width: 20%;" title="Good: 20%"></div>
                                            <span class="mood-percent">20%</span>
                                        </div>
                                        <div class="mood-bar">
                                            <span class="mood-emoji">😐</span>
                                            <div class="mood-bar-fill" style="width: 15%;" title="Neutral: 15%"></div>
                                            <span class="mood-percent">15%</span>
                                        </div>
                                        <div class="mood-bar">
                                            <span class="mood-emoji">😔</span>
                                            <div class="mood-bar-fill" style="width: 5%;" title="Sad: 5%"></div>
                                            <span class="mood-percent">5%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-icon">🔍</div>
                                <div class="insight-content">
                                    <h4>Mood Influencers</h4>
                                    <p>Factors that most impact your mood</p>
                                    <div class="influencer-list" id="moodInfluencers">
                                        <div class="influencer-item positive">
                                            <span class="influencer-icon">💪</span>
                                            <span class="influencer-name">Exercise</span>
                                            <span class="influencer-impact">+2.3</span>
                                        </div>
                                        <div class="influencer-item positive">
                                            <span class="influencer-icon">😴</span>
                                            <span class="influencer-name">Good Sleep</span>
                                            <span class="influencer-impact">+1.8</span>
                                        </div>
                                        <div class="influencer-item positive">
                                            <span class="influencer-icon">👥</span>
                                            <span class="influencer-name">Social Time</span>
                                            <span class="influencer-impact">+1.5</span>
                                        </div>
                                        <div class="influencer-item negative">
                                            <span class="influencer-icon">💼</span>
                                            <span class="influencer-name">Work Stress</span>
                                            <span class="influencer-impact">-1.2</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-section">
                        <h2>🎯 Habit & Goal Insights</h2>
                        <div class="insight-cards">
                            <div class="insight-card">
                                <div class="insight-icon">📈</div>
                                <div class="insight-content">
                                    <h4>Habit Performance</h4>
                                    <p>Your consistency across different habit categories</p>
                                    <div class="habit-performance" id="habitPerformance">
                                        <div class="performance-item">
                                            <span class="performance-label">🏥 Health</span>
                                            <div class="performance-bar">
                                                <div class="performance-fill" style="width: 85%;" title="85%"></div>
                                            </div>
                                            <span class="performance-value">85%</span>
                                        </div>
                                        <div class="performance-item">
                                            <span class="performance-label">⚡ Productivity</span>
                                            <div class="performance-bar">
                                                <div class="performance-fill" style="width: 78%;" title="78%"></div>
                                            </div>
                                            <span class="performance-value">78%</span>
                                        </div>
                                        <div class="performance-item">
                                            <span class="performance-label">📚 Learning</span>
                                            <div class="performance-bar">
                                                <div class="performance-fill" style="width: 65%;" title="65%"></div>
                                            </div>
                                            <span class="performance-value">65%</span>
                                        </div>
                                        <div class="performance-item">
                                            <span class="performance-label">🧘 Mindfulness</span>
                                            <div class="performance-bar">
                                                <div class="performance-fill" style="width: 72%;" title="72%"></div>
                                            </div>
                                            <span class="performance-value">72%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="insight-card">
                                <div class="insight-icon">🏆</div>
                                <div class="insight-content">
                                    <h4>Achievement Timeline</h4>
                                    <p>Your recent accomplishments and milestones</p>
                                    <div class="achievement-timeline" id="achievementTimeline">
                                        <div class="timeline-item">
                                            <div class="timeline-date">Today</div>
                                            <div class="timeline-content">
                                                <span class="timeline-icon">🎯</span>
                                                <span class="timeline-text">Completed "Learn JavaScript" goal</span>
                                            </div>
                                        </div>
                                        <div class="timeline-item">
                                            <div class="timeline-date">2 days ago</div>
                                            <div class="timeline-content">
                                                <span class="timeline-icon">🔥</span>
                                                <span class="timeline-text">7-day exercise streak achieved</span>
                                            </div>
                                        </div>
                                        <div class="timeline-item">
                                            <div class="timeline-date">1 week ago</div>
                                            <div class="timeline-content">
                                                <span class="timeline-icon">📚</span>
                                                <span class="timeline-text">50 tasks completed milestone</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-section">
                        <h2>💡 Personalized Recommendations</h2>
                        <div class="recommendations" id="recommendations">
                            <div class="recommendation-card">
                                <div class="recommendation-icon">⏰</div>
                                <div class="recommendation-content">
                                    <h4>Optimize Your Schedule</h4>
                                    <p>Schedule important tasks between 9-11 AM when you're most productive. Consider blocking this time for deep work.</p>
                                </div>
                            </div>
                            <div class="recommendation-card">
                                <div class="recommendation-icon">💪</div>
                                <div class="recommendation-content">
                                    <h4>Boost Your Mood</h4>
                                    <p>Exercise consistently improves your mood by +2.3 points. Try adding a 20-minute workout to your morning routine.</p>
                                </div>
                            </div>
                            <div class="recommendation-card">
                                <div class="recommendation-icon">📚</div>
                                <div class="recommendation-content">
                                    <h4>Improve Learning Habits</h4>
                                    <p>Your learning consistency is at 65%. Set smaller, daily learning goals to build momentum and improve retention.</p>
                                </div>
                            </div>
                            <div class="recommendation-card">
                                <div class="recommendation-icon">🎯</div>
                                <div class="recommendation-content">
                                    <h4>Goal Strategy</h4>
                                    <p>Break down larger goals into weekly milestones. You complete 23% more tasks when they have clear deadlines.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Diary App -->
        <div class="diary-app" id="diaryApp" style="display: none;">
            <div class="header">
                <button class="back-btn" id="backBtn" title="Back to Home">←</button>
                <h1>📖 My Personal Diary</h1>
                <p>Capture your thoughts, memories, and moments</p>
            </div>
            
            <div class="content">
                <div class="success-message" id="successMessage">
                    ✅ Your diary entry has been saved successfully!
                </div>
                
                <div class="new-entry-section" id="newEntrySection">
                    <h2>✍️ Write New Entry</h2>
                    <form class="entry-form" id="entryForm">
                        <input 
                            type="text" 
                            class="entry-title" 
                            id="entryTitle" 
                            placeholder="Give your entry a title (optional)..."
                            maxlength="100"
                        >
                        <textarea 
                            class="entry-textarea" 
                            id="entryContent" 
                            placeholder="Dear diary, today..."
                            required
                        ></textarea>
                        <div class="mood-section">
                            <label class="mood-label">How are you feeling today?</label>
                            <div class="mood-selector">
                                <input type="radio" id="mood-amazing" name="mood" value="amazing">
                                <label for="mood-amazing" class="mood-option" title="Amazing">😄</label>
                                
                                <input type="radio" id="mood-happy" name="mood" value="happy">
                                <label for="mood-happy" class="mood-option" title="Happy">😊</label>
                                
                                <input type="radio" id="mood-neutral" name="mood" value="neutral" checked>
                                <label for="mood-neutral" class="mood-option" title="Neutral">😐</label>
                                
                                <input type="radio" id="mood-sad" name="mood" value="sad">
                                <label for="mood-sad" class="mood-option" title="Sad">😔</label>
                                
                                <input type="radio" id="mood-terrible" name="mood" value="terrible">
                                <label for="mood-terrible" class="mood-option" title="Terrible">😢</label>
                            </div>
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">💾 Save Entry</button>
                            <button type="button" class="btn btn-secondary" id="viewEntriesBtn">📚 View Past Entries</button>
                        </div>
                    </form>
                </div>
                
                <div class="entries-section" id="entriesSection">
                    <h2>📚 Past Diary Entries</h2>
                    <div class="button-group" style="margin-bottom: 30px;">
                        <button type="button" class="btn btn-primary" id="newEntryBtn">✍️ Write New Entry</button>
                    </div>
                    <div id="entriesList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Dialog -->
    <div class="confirmation-overlay" id="confirmationOverlay">
        <div class="confirmation-box">
            <div class="confirmation-title">🗑️ Delete Entry</div>
            <div class="confirmation-message" id="confirmationMessage">
                Do you really want to delete this entry?
            </div>
            <div class="confirmation-buttons">
                <button class="btn-confirm btn-yes" id="confirmYes">Yes</button>
                <button class="btn-confirm btn-no" id="confirmNo">No</button>
            </div>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div class="achievements-popup" id="achievementPopup">
        <div class="achievement-title" id="achievementTitle">🏆 Achievement Unlocked!</div>
        <div class="achievement-desc" id="achievementDesc">You've completed your first task!</div>
    </div>

    <script>
        class JournalHub {
            constructor() {
                this.currentView = 'landing';
                this.diaryApp = null;
                this.initializeEventListeners();
            }

            initializeEventListeners() {
                // Landing page navigation
                document.getElementById('myDiaryBtn').addEventListener('click', () => {
                    this.showDiaryApp();
                });

                document.getElementById('todoBtn').addEventListener('click', () => {
                    this.showTodoApp();
                });

                document.getElementById('moodJournalBtn').addEventListener('click', () => {
                    this.showMoodJournalApp();
                });

                document.getElementById('habitTrackerBtn').addEventListener('click', () => {
                    this.showHabitTrackerApp();
                });

                document.getElementById('goalPlannerBtn').addEventListener('click', () => {
                    this.showGoalPlannerApp();
                });

                document.getElementById('gratitudeJournalBtn').addEventListener('click', () => {
                    this.showGratitudeJournalApp();
                });

                document.getElementById('lifeAnalyticsBtn').addEventListener('click', () => {
                    this.showLifeAnalyticsApp();
                });

                // Back buttons
                document.getElementById('backBtn').addEventListener('click', () => {
                    this.showLandingPage();
                });

                document.getElementById('todoBackBtn').addEventListener('click', () => {
                    this.showLandingPage();
                });

                document.getElementById('moodBackBtn').addEventListener('click', () => {
                    this.showLandingPage();
                });

                document.getElementById('habitBackBtn').addEventListener('click', () => {
                    this.showLandingPage();
                });

                document.getElementById('goalBackBtn').addEventListener('click', () => {
                    this.showLandingPage();
                });

                document.getElementById('gratitudeBackBtn').addEventListener('click', () => {
                    this.showLandingPage();
                });

                document.getElementById('analyticsBackBtn').addEventListener('click', () => {
                    this.showLandingPage();
                });
            }

            showDiaryApp() {
                document.getElementById('landingPage').style.display = 'none';
                document.getElementById('todoApp').style.display = 'none';
                document.getElementById('diaryApp').style.display = 'block';
                this.currentView = 'diary';
                
                // Initialize diary app if not already done
                if (!this.diaryApp) {
                    this.diaryApp = new DiaryApp();
                }
            }

            showTodoApp() {
                this.hideAllApps();
                document.getElementById('todoApp').style.display = 'block';
                this.currentView = 'todo';
                
                if (!this.todoApp) {
                    this.todoApp = new TodoApp();
                }
            }

            showMoodJournalApp() {
                this.hideAllApps();
                document.getElementById('moodJournalApp').style.display = 'block';
                this.currentView = 'mood';
                
                if (!this.moodJournalApp) {
                    this.moodJournalApp = new MoodJournalApp();
                }
            }

            showHabitTrackerApp() {
                this.hideAllApps();
                document.getElementById('habitTrackerApp').style.display = 'block';
                this.currentView = 'habit';
                
                if (!this.habitTrackerApp) {
                    this.habitTrackerApp = new HabitTrackerApp();
                }
            }

            showGoalPlannerApp() {
                this.hideAllApps();
                document.getElementById('goalPlannerApp').style.display = 'block';
                this.currentView = 'goal';
                
                if (!this.goalPlannerApp) {
                    this.goalPlannerApp = new GoalPlannerApp();
                }
            }

            showGratitudeJournalApp() {
                this.hideAllApps();
                document.getElementById('gratitudeJournalApp').style.display = 'block';
                this.currentView = 'gratitude';
                
                if (!this.gratitudeJournalApp) {
                    this.gratitudeJournalApp = new GratitudeJournalApp();
                }
            }

            showLifeAnalyticsApp() {
                this.hideAllApps();
                document.getElementById('lifeAnalyticsApp').style.display = 'block';
                this.currentView = 'analytics';
                
                if (!this.lifeAnalyticsApp) {
                    this.lifeAnalyticsApp = new LifeAnalyticsApp();
                }
            }

            hideAllApps() {
                document.getElementById('landingPage').style.display = 'none';
                document.getElementById('diaryApp').style.display = 'none';
                document.getElementById('todoApp').style.display = 'none';
                document.getElementById('moodJournalApp').style.display = 'none';
                document.getElementById('habitTrackerApp').style.display = 'none';
                document.getElementById('goalPlannerApp').style.display = 'none';
                document.getElementById('gratitudeJournalApp').style.display = 'none';
                document.getElementById('lifeAnalyticsApp').style.display = 'none';
            }

            showLandingPage() {
                this.hideAllApps();
                document.getElementById('landingPage').style.display = 'block';
                this.currentView = 'landing';
            }
        }

        class DiaryApp {
            constructor() {
                this.entries = this.loadEntries();
                this.moodEmojis = {
                    amazing: '😄',
                    happy: '😊',
                    neutral: '😐',
                    sad: '😔',
                    terrible: '😢'
                };
                this.initializeEventListeners();
            }

            initializeEventListeners() {
                document.getElementById('entryForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveEntry();
                });

                document.getElementById('viewEntriesBtn').addEventListener('click', () => {
                    this.showEntriesView();
                });

                document.getElementById('newEntryBtn').addEventListener('click', () => {
                    this.showNewEntryView();
                });
            }

            saveEntry() {
                const title = document.getElementById('entryTitle').value.trim();
                const content = document.getElementById('entryContent').value.trim();
                const mood = document.querySelector('input[name="mood"]:checked').value;

                if (!content) {
                    alert('Please write something in your diary entry!');
                    return;
                }

                const entry = {
                    id: Date.now(),
                    title: title || 'Untitled Entry',
                    content: content,
                    mood: mood,
                    date: new Date().toLocaleString('en-US', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    })
                };

                this.entries.unshift(entry);
                this.saveEntries();
                this.clearForm();
                this.showSuccessMessage();
            }

            clearForm() {
                document.getElementById('entryTitle').value = '';
                document.getElementById('entryContent').value = '';
                document.getElementById('mood-neutral').checked = true;
            }

            showSuccessMessage() {
                const message = document.getElementById('successMessage');
                message.style.display = 'block';
                setTimeout(() => {
                    message.style.display = 'none';
                }, 3000);
            }

            showEntriesView() {
                document.getElementById('newEntrySection').style.display = 'none';
                document.getElementById('entriesSection').style.display = 'block';
                this.renderEntries();
            }

            showNewEntryView() {
                document.getElementById('entriesSection').style.display = 'none';
                document.getElementById('newEntrySection').style.display = 'block';
            }

            renderEntries() {
                const entriesList = document.getElementById('entriesList');
                
                if (this.entries.length === 0) {
                    entriesList.innerHTML = `
                        <div class="no-entries">
                            📝 No diary entries yet. Start writing your first entry!
                        </div>
                    `;
                    return;
                }

                entriesList.innerHTML = this.entries.map(entry => `
                    <div class="entry-item">
                        <div class="entry-header">
                            <div class="entry-title-mood">
                                <h3 class="entry-item-title">${this.escapeHtml(entry.title)}</h3>
                                <span class="entry-mood">${this.moodEmojis[entry.mood] || '😐'}</span>
                            </div>
                            <div class="entry-actions">
                                <button class="btn-delete" onclick="journalHub.diaryApp.deleteEntry(${entry.id})" title="Delete this entry">
                                    🗑️
                                </button>
                            </div>
                        </div>
                        <div class="entry-content">${this.escapeHtml(entry.content)}</div>
                        <div class="entry-footer">
                            <span class="entry-date">${entry.date}</span>
                        </div>
                    </div>
                `).join('');
            }

            deleteEntry(entryId) {
                const entry = this.entries.find(e => e.id === entryId);
                if (!entry) return;

                this.showConfirmationDialog(entry.title, () => {
                    this.entries = this.entries.filter(e => e.id !== entryId);
                    this.saveEntries();
                    this.renderEntries();
                    
                    const message = document.getElementById('successMessage');
                    message.innerHTML = '🗑️ Entry deleted successfully!';
                    message.style.display = 'block';
                    setTimeout(() => {
                        message.style.display = 'none';
                        message.innerHTML = '✅ Your diary entry has been saved successfully!';
                    }, 2000);
                });
            }

            showConfirmationDialog(entryTitle, onConfirm) {
                const overlay = document.getElementById('confirmationOverlay');
                const message = document.getElementById('confirmationMessage');
                const yesBtn = document.getElementById('confirmYes');
                const noBtn = document.getElementById('confirmNo');

                message.textContent = `Do you really want to delete "${entryTitle}"?`;
                overlay.style.display = 'flex';

                const newYesBtn = yesBtn.cloneNode(true);
                const newNoBtn = noBtn.cloneNode(true);
                yesBtn.parentNode.replaceChild(newYesBtn, yesBtn);
                noBtn.parentNode.replaceChild(newNoBtn, noBtn);

                newYesBtn.addEventListener('click', () => {
                    overlay.style.display = 'none';
                    onConfirm();
                });

                newNoBtn.addEventListener('click', () => {
                    overlay.style.display = 'none';
                });

                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.style.display = 'none';
                    }
                });
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            loadEntries() {
                try {
                    const stored = localStorage.getItem('diaryEntries');
                    return stored ? JSON.parse(stored) : [];
                } catch (error) {
                    console.error('Error loading entries:', error);
                    return [];
                }
            }

            saveEntries() {
                try {
                    localStorage.setItem('diaryEntries', JSON.stringify(this.entries));
                } catch (error) {
                    console.error('Error saving entries:', error);
                    alert('Unable to save entry. Please try again.');
                }
            }
        }

        class TodoApp {
            constructor() {
                this.tasks = this.loadTasks();
                this.currentFilter = 'all';
                this.currentView = 'all';
                this.searchTerm = '';
                this.selectedTasks = new Set();
                this.achievements = this.loadAchievements();
                this.streak = this.loadStreak();
                this.dailyGoal = this.loadDailyGoal();
                this.initializeEventListeners();
                this.renderTasks();
                this.updateStats();
                this.updateDashboard();
                this.checkRecurringTasks();
            }

            initializeEventListeners() {
                document.getElementById('taskForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addTask();
                });

                // Search functionality
                document.getElementById('searchInput').addEventListener('input', (e) => {
                    this.searchTerm = e.target.value.toLowerCase();
                    this.renderTasks();
                });

                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.setFilter(e.target.dataset.filter);
                    });
                });

                // View toggle buttons
                document.querySelectorAll('.view-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.setView(e.target.dataset.view);
                    });
                });

                // Recurring task checkbox
                document.getElementById('recurringTask').addEventListener('change', (e) => {
                    document.getElementById('recurringSelect').disabled = !e.target.checked;
                });

                // Bulk actions
                document.getElementById('bulkComplete').addEventListener('click', () => {
                    this.bulkCompleteSelected();
                });

                document.getElementById('bulkDelete').addEventListener('click', () => {
                    this.bulkDeleteSelected();
                });

                document.getElementById('bulkExport').addEventListener('click', () => {
                    this.exportTasks();
                });
            }

            addTask() {
                const taskInput = document.getElementById('taskInput');
                const prioritySelect = document.getElementById('prioritySelect');
                const categorySelect = document.getElementById('categorySelect');
                const dueDateInput = document.getElementById('dueDateInput');
                const timeEstimate = document.getElementById('timeEstimate');
                const taskNotes = document.getElementById('taskNotes');
                const recurringTask = document.getElementById('recurringTask');
                const recurringSelect = document.getElementById('recurringSelect');

                const taskText = taskInput.value.trim();

                if (!taskText) {
                    alert('Please enter a task!');
                    return;
                }

                const task = {
                    id: Date.now(),
                    text: taskText,
                    priority: prioritySelect.value,
                    category: categorySelect.value,
                    completed: false,
                    dueDate: dueDateInput.value || null,
                    timeEstimate: timeEstimate.value || null,
                    notes: taskNotes.value.trim() || null,
                    recurring: recurringTask.checked ? recurringSelect.value : null,
                    subtasks: [],
                    createdAt: new Date().toISOString(),
                    completedAt: null
                };

                this.tasks.unshift(task);
                this.saveTasks();
                this.renderTasks();
                this.updateStats();
                this.updateDashboard();
                this.showSuccessMessage('Task added successfully!');
                this.checkAchievements();
                
                // Clear form
                this.clearTaskForm();
            }

            clearTaskForm() {
                document.getElementById('taskInput').value = '';
                document.getElementById('prioritySelect').value = 'medium';
                document.getElementById('categorySelect').value = 'personal';
                document.getElementById('dueDateInput').value = '';
                document.getElementById('timeEstimate').value = '';
                document.getElementById('taskNotes').value = '';
                document.getElementById('recurringTask').checked = false;
                document.getElementById('recurringSelect').disabled = true;
            }

            toggleTask(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (task) {
                    task.completed = !task.completed;
                    task.completedAt = task.completed ? new Date().toISOString() : null;
                    
                    // Handle recurring tasks
                    if (task.completed && task.recurring) {
                        this.createRecurringTask(task);
                    }
                    
                    this.saveTasks();
                    this.renderTasks();
                    this.updateStats();
                    this.updateDashboard();
                    this.updateStreak();
                    this.showSuccessMessage(task.completed ? 'Task completed!' : 'Task marked as pending!');
                    this.checkAchievements();
                }
            }

            createRecurringTask(originalTask) {
                const newTask = { ...originalTask };
                newTask.id = Date.now() + Math.random();
                newTask.completed = false;
                newTask.completedAt = null;
                newTask.createdAt = new Date().toISOString();
                
                // Calculate next due date
                if (newTask.dueDate) {
                    const currentDue = new Date(newTask.dueDate);
                    switch (newTask.recurring) {
                        case 'daily':
                            currentDue.setDate(currentDue.getDate() + 1);
                            break;
                        case 'weekly':
                            currentDue.setDate(currentDue.getDate() + 7);
                            break;
                        case 'monthly':
                            currentDue.setMonth(currentDue.getMonth() + 1);
                            break;
                    }
                    newTask.dueDate = currentDue.toISOString().split('T')[0];
                }
                
                this.tasks.unshift(newTask);
            }

            deleteTask(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (!task) return;

                this.showConfirmationDialog(`Delete "${task.text}"?`, () => {
                    this.tasks = this.tasks.filter(t => t.id !== taskId);
                    this.selectedTasks.delete(taskId);
                    this.saveTasks();
                    this.renderTasks();
                    this.updateStats();
                    this.updateDashboard();
                    this.showSuccessMessage('Task deleted successfully!');
                    this.updateBulkActions();
                });
            }

            toggleTaskSelection(taskId) {
                if (this.selectedTasks.has(taskId)) {
                    this.selectedTasks.delete(taskId);
                } else {
                    this.selectedTasks.add(taskId);
                }
                this.updateBulkActions();
                this.renderTasks();
            }

            updateBulkActions() {
                const bulkActions = document.getElementById('bulkActions');
                const selectedCount = document.getElementById('selectedCount');
                
                if (this.selectedTasks.size > 0) {
                    bulkActions.classList.add('show');
                    selectedCount.textContent = this.selectedTasks.size;
                } else {
                    bulkActions.classList.remove('show');
                }
            }

            bulkCompleteSelected() {
                this.selectedTasks.forEach(taskId => {
                    const task = this.tasks.find(t => t.id === taskId);
                    if (task && !task.completed) {
                        task.completed = true;
                        task.completedAt = new Date().toISOString();
                        
                        if (task.recurring) {
                            this.createRecurringTask(task);
                        }
                    }
                });
                
                this.selectedTasks.clear();
                this.saveTasks();
                this.renderTasks();
                this.updateStats();
                this.updateDashboard();
                this.updateBulkActions();
                this.showSuccessMessage('Selected tasks completed!');
                this.checkAchievements();
            }

            bulkDeleteSelected() {
                this.showConfirmationDialog(`Delete ${this.selectedTasks.size} selected tasks?`, () => {
                    this.tasks = this.tasks.filter(t => !this.selectedTasks.has(t.id));
                    this.selectedTasks.clear();
                    this.saveTasks();
                    this.renderTasks();
                    this.updateStats();
                    this.updateDashboard();
                    this.updateBulkActions();
                    this.showSuccessMessage('Selected tasks deleted!');
                });
            }

            exportTasks() {
                const selectedTasksData = this.tasks.filter(t => this.selectedTasks.has(t.id));
                const exportData = selectedTasksData.map(task => ({
                    task: task.text,
                    priority: task.priority,
                    category: task.category,
                    dueDate: task.dueDate,
                    completed: task.completed,
                    notes: task.notes
                }));
                
                const dataStr = JSON.stringify(exportData, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `tasks-export-${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                URL.revokeObjectURL(url);
                
                this.showSuccessMessage('Tasks exported successfully!');
            }

            setFilter(filter) {
                this.currentFilter = filter;
                
                // Update active filter button
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
                
                this.renderTasks();
            }

            setView(view) {
                this.currentView = view;
                
                // Update active view button
                document.querySelectorAll('.view-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-view="${view}"]`).classList.add('active');
                
                this.renderTasks();
            }

            getFilteredTasks() {
                let filtered = [...this.tasks];
                
                // Apply search filter
                if (this.searchTerm) {
                    filtered = filtered.filter(task => 
                        task.text.toLowerCase().includes(this.searchTerm) ||
                        (task.notes && task.notes.toLowerCase().includes(this.searchTerm)) ||
                        task.category.toLowerCase().includes(this.searchTerm)
                    );
                }
                
                // Apply view filter (date-based)
                const today = new Date();
                const todayStr = today.toISOString().split('T')[0];
                const weekFromNow = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);
                const weekStr = weekFromNow.toISOString().split('T')[0];
                
                switch (this.currentView) {
                    case 'today':
                        filtered = filtered.filter(task => 
                            task.dueDate === todayStr || 
                            (task.createdAt && task.createdAt.split('T')[0] === todayStr)
                        );
                        break;
                    case 'week':
                        filtered = filtered.filter(task => 
                            (task.dueDate && task.dueDate <= weekStr) ||
                            (task.createdAt && task.createdAt.split('T')[0] >= todayStr)
                        );
                        break;
                }
                
                // Apply status/category filter
                switch (this.currentFilter) {
                    case 'completed':
                        return filtered.filter(task => task.completed);
                    case 'pending':
                        return filtered.filter(task => !task.completed);
                    case 'overdue':
                        return filtered.filter(task => this.isOverdue(task));
                    case 'personal':
                    case 'work':
                    case 'shopping':
                        return filtered.filter(task => task.category === this.currentFilter);
                    default:
                        return filtered;
                }
            }

            isOverdue(task) {
                if (!task.dueDate || task.completed) return false;
                const today = new Date().toISOString().split('T')[0];
                return task.dueDate < today;
            }

            isDueToday(task) {
                if (!task.dueDate || task.completed) return false;
                const today = new Date().toISOString().split('T')[0];
                return task.dueDate === today;
            }

            renderTasks() {
                const tasksList = document.getElementById('tasksList');
                const filteredTasks = this.getFilteredTasks();
                
                if (filteredTasks.length === 0) {
                    const emptyMessage = this.searchTerm 
                        ? '🔍 No tasks found matching your search.'
                        : this.currentFilter === 'all' 
                            ? '📝 No tasks yet. Add your first task above!'
                            : `📝 No ${this.currentFilter} tasks found.`;
                    
                    tasksList.innerHTML = `
                        <div class="no-tasks">
                            ${emptyMessage}
                        </div>
                    `;
                    return;
                }

                tasksList.innerHTML = filteredTasks.map(task => {
                    const isOverdue = this.isOverdue(task);
                    const isDueToday = this.isDueToday(task);
                    const isSelected = this.selectedTasks.has(task.id);
                    
                    let dueDateDisplay = '';
                    if (task.dueDate) {
                        const dueDate = new Date(task.dueDate);
                        const today = new Date();
                        const diffTime = dueDate - today;
                        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                        
                        if (isOverdue) {
                            dueDateDisplay = `<span class="task-due-date overdue">⚠️ Overdue (${Math.abs(diffDays)} days)</span>`;
                        } else if (isDueToday) {
                            dueDateDisplay = `<span class="task-due-date due-today">📅 Due Today</span>`;
                        } else if (diffDays === 1) {
                            dueDateDisplay = `<span class="task-due-date">📅 Due Tomorrow</span>`;
                        } else if (diffDays <= 7) {
                            dueDateDisplay = `<span class="task-due-date">📅 Due in ${diffDays} days</span>`;
                        } else {
                            dueDateDisplay = `<span class="task-due-date">📅 ${dueDate.toLocaleDateString()}</span>`;
                        }
                    }
                    
                    const categoryEmojis = {
                        personal: '👤',
                        work: '💼',
                        shopping: '🛒',
                        health: '🏥',
                        learning: '📚',
                        other: '📋'
                    };
                    
                    return `
                        <div class="task-item ${task.completed ? 'completed' : ''} ${task.priority}-priority ${isOverdue ? 'overdue' : ''} ${isDueToday ? 'due-today' : ''} ${isSelected ? 'selected' : ''}">
                            <input 
                                type="checkbox" 
                                class="task-select" 
                                ${isSelected ? 'checked' : ''}
                                onchange="journalHub.todoApp.toggleTaskSelection(${task.id})"
                            >
                            <input 
                                type="checkbox" 
                                class="task-checkbox" 
                                ${task.completed ? 'checked' : ''}
                                onchange="journalHub.todoApp.toggleTask(${task.id})"
                            >
                            <div class="task-content">
                                <div class="task-text">${this.escapeHtml(task.text)}</div>
                                ${task.notes ? `<div class="task-notes-display">${this.escapeHtml(task.notes)}</div>` : ''}
                                <div class="task-meta">
                                    <span class="task-priority priority-${task.priority}">
                                        ${task.priority === 'high' ? '🔴 High' : task.priority === 'medium' ? '🟡 Medium' : '🟢 Low'}
                                    </span>
                                    <span class="task-category">
                                        ${categoryEmojis[task.category]} ${task.category.charAt(0).toUpperCase() + task.category.slice(1)}
                                    </span>
                                    ${dueDateDisplay}
                                    ${task.timeEstimate ? `<span class="task-time-estimate">⏱️ ${task.timeEstimate}</span>` : ''}
                                    ${task.recurring ? `<span class="task-time-estimate">🔄 ${task.recurring}</span>` : ''}
                                    ${task.energyLevel ? `<span class="task-energy energy-${task.energyLevel}">⚡ ${task.energyLevel} energy</span>` : ''}
                                    ${task.location ? `<span class="task-location">📍 ${this.escapeHtml(task.location)}</span>` : ''}
                                </div>
                                ${task.tags && task.tags.length > 0 ? `
                                    <div class="task-tags">
                                        ${task.tags.map(tag => `<span class="task-tag">#${this.escapeHtml(tag)}</span>`).join('')}
                                    </div>
                                ` : ''}
                                ${task.subtasks && task.subtasks.length > 0 ? this.renderSubtasks(task) : ''}
                            </div>
                            <div class="task-actions">
                                <button class="task-delete-btn" onclick="journalHub.todoApp.deleteTask(${task.id})" title="Delete task">
                                    🗑️
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderSubtasks(task) {
                const completed = task.subtasks.filter(st => st.completed).length;
                const total = task.subtasks.length;
                const progress = total > 0 ? (completed / total) * 100 : 0;
                
                return `
                    <div class="subtasks">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        ${task.subtasks.map(subtask => `
                            <div class="subtask-item ${subtask.completed ? 'completed' : ''}">
                                <input type="checkbox" class="subtask-checkbox" ${subtask.completed ? 'checked' : ''}>
                                <span class="subtask-text">${this.escapeHtml(subtask.text)}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            updateStats() {
                const total = this.tasks.length;
                const completed = this.tasks.filter(task => task.completed).length;
                const pending = total - completed;
                const overdue = this.tasks.filter(task => this.isOverdue(task)).length;

                document.getElementById('totalTasks').textContent = total;
                document.getElementById('completedTasks').textContent = completed;
                document.getElementById('pendingTasks').textContent = pending;
                document.getElementById('overdueTasks').textContent = overdue;
            }

            updateDashboard() {
                // Update streak
                document.getElementById('streakCount').textContent = this.streak;
                
                // Update today's progress
                const today = new Date().toISOString().split('T')[0];
                const todayTasks = this.tasks.filter(task => 
                    task.createdAt && task.createdAt.split('T')[0] === today
                );
                const todayCompleted = todayTasks.filter(task => task.completed).length;
                const todayTotal = todayTasks.length;
                const todayProgress = todayTotal > 0 ? Math.round((todayCompleted / todayTotal) * 100) : 0;
                
                document.getElementById('todayProgress').textContent = `${todayProgress}%`;
                document.getElementById('todayTasksCount').textContent = `${todayCompleted}/${todayTotal} tasks`;
                
                // Update achievements
                document.getElementById('achievementCount').textContent = this.achievements.length;
                
                // Update daily goal
                document.getElementById('dailyGoal').textContent = this.dailyGoal;
            }

            updateStreak() {
                const today = new Date().toISOString().split('T')[0];
                const yesterday = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().split('T')[0];
                
                const todayCompleted = this.tasks.filter(task => 
                    task.completedAt && task.completedAt.split('T')[0] === today
                ).length;
                
                const yesterdayCompleted = this.tasks.filter(task => 
                    task.completedAt && task.completedAt.split('T')[0] === yesterday
                ).length;
                
                if (todayCompleted >= this.dailyGoal) {
                    if (yesterdayCompleted >= this.dailyGoal || this.streak === 0) {
                        this.streak++;
                    }
                } else if (yesterdayCompleted < this.dailyGoal && this.streak > 0) {
                    this.streak = 0;
                }
                
                this.saveStreak();
                this.updateDashboard();
            }

            checkAchievements() {
                const newAchievements = [];
                
                // First task achievement
                if (this.tasks.length === 1 && !this.achievements.includes('first_task')) {
                    newAchievements.push({
                        id: 'first_task',
                        title: 'Getting Started!',
                        description: 'You created your first task!'
                    });
                }
                
                // First completion achievement
                const completedTasks = this.tasks.filter(t => t.completed).length;
                if (completedTasks === 1 && !this.achievements.includes('first_completion')) {
                    newAchievements.push({
                        id: 'first_completion',
                        title: 'Task Master!',
                        description: 'You completed your first task!'
                    });
                }
                
                // Streak achievements
                if (this.streak === 3 && !this.achievements.includes('streak_3')) {
                    newAchievements.push({
                        id: 'streak_3',
                        title: 'On Fire!',
                        description: '3-day streak achieved!'
                    });
                }
                
                if (this.streak === 7 && !this.achievements.includes('streak_7')) {
                    newAchievements.push({
                        id: 'streak_7',
                        title: 'Week Warrior!',
                        description: '7-day streak achieved!'
                    });
                }
                
                // Productivity achievements
                if (completedTasks === 10 && !this.achievements.includes('tasks_10')) {
                    newAchievements.push({
                        id: 'tasks_10',
                        title: 'Productive!',
                        description: 'You completed 10 tasks!'
                    });
                }
                
                if (completedTasks === 50 && !this.achievements.includes('tasks_50')) {
                    newAchievements.push({
                        id: 'tasks_50',
                        title: 'Super Productive!',
                        description: 'You completed 50 tasks!'
                    });
                }
                
                // Show new achievements
                newAchievements.forEach(achievement => {
                    this.achievements.push(achievement.id);
                    this.showAchievement(achievement);
                });
                
                if (newAchievements.length > 0) {
                    this.saveAchievements();
                    this.updateDashboard();
                }
            }

            showAchievement(achievement) {
                const popup = document.getElementById('achievementPopup');
                const title = document.getElementById('achievementTitle');
                const desc = document.getElementById('achievementDesc');
                
                title.textContent = `🏆 ${achievement.title}`;
                desc.textContent = achievement.description;
                
                popup.classList.add('show');
                
                setTimeout(() => {
                    popup.classList.remove('show');
                }, 4000);
            }

            checkRecurringTasks() {
                // Check if any recurring tasks need to be created
                const today = new Date().toISOString().split('T')[0];
                
                this.tasks.forEach(task => {
                    if (task.recurring && task.completed && task.dueDate) {
                        const dueDate = new Date(task.dueDate);
                        const daysSinceCompletion = Math.floor((new Date() - dueDate) / (1000 * 60 * 60 * 24));
                        
                        let shouldCreateNew = false;
                        switch (task.recurring) {
                            case 'daily':
                                shouldCreateNew = daysSinceCompletion >= 1;
                                break;
                            case 'weekly':
                                shouldCreateNew = daysSinceCompletion >= 7;
                                break;
                            case 'monthly':
                                shouldCreateNew = daysSinceCompletion >= 30;
                                break;
                        }
                        
                        if (shouldCreateNew) {
                            // Check if we already created a new instance
                            const hasNewInstance = this.tasks.some(t => 
                                t.text === task.text && 
                                t.recurring === task.recurring && 
                                !t.completed &&
                                t.id !== task.id
                            );
                            
                            if (!hasNewInstance) {
                                this.createRecurringTask(task);
                            }
                        }
                    }
                });
            }

            showSuccessMessage(message) {
                const messageEl = document.getElementById('todoSuccessMessage');
                messageEl.textContent = message;
                messageEl.style.display = 'block';
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, 3000);
            }

            showConfirmationDialog(message, onConfirm) {
                const overlay = document.getElementById('confirmationOverlay');
                const messageEl = document.getElementById('confirmationMessage');
                const yesBtn = document.getElementById('confirmYes');
                const noBtn = document.getElementById('confirmNo');

                messageEl.textContent = message;
                overlay.style.display = 'flex';

                // Remove existing listeners
                const newYesBtn = yesBtn.cloneNode(true);
                const newNoBtn = noBtn.cloneNode(true);
                yesBtn.parentNode.replaceChild(newYesBtn, yesBtn);
                noBtn.parentNode.replaceChild(newNoBtn, noBtn);

                // Add new listeners
                newYesBtn.addEventListener('click', () => {
                    overlay.style.display = 'none';
                    onConfirm();
                });

                newNoBtn.addEventListener('click', () => {
                    overlay.style.display = 'none';
                });

                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.style.display = 'none';
                    }
                });
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            loadTasks() {
                try {
                    const stored = localStorage.getItem('todoTasks');
                    return stored ? JSON.parse(stored) : [];
                } catch (error) {
                    console.error('Error loading tasks:', error);
                    return [];
                }
            }

            saveTasks() {
                try {
                    localStorage.setItem('todoTasks', JSON.stringify(this.tasks));
                } catch (error) {
                    console.error('Error saving tasks:', error);
                    alert('Unable to save task. Please try again.');
                }
            }

            loadAchievements() {
                try {
                    const stored = localStorage.getItem('todoAchievements');
                    return stored ? JSON.parse(stored) : [];
                } catch (error) {
                    console.error('Error loading achievements:', error);
                    return [];
                }
            }

            saveAchievements() {
                try {
                    localStorage.setItem('todoAchievements', JSON.stringify(this.achievements));
                } catch (error) {
                    console.error('Error saving achievements:', error);
                }
            }

            loadStreak() {
                try {
                    const stored = localStorage.getItem('todoStreak');
                    return stored ? parseInt(stored) : 0;
                } catch (error) {
                    console.error('Error loading streak:', error);
                    return 0;
                }
            }

            saveStreak() {
                try {
                    localStorage.setItem('todoStreak', this.streak.toString());
                } catch (error) {
                    console.error('Error saving streak:', error);
                }
            }

            loadDailyGoal() {
                try {
                    const stored = localStorage.getItem('todoDailyGoal');
                    return stored ? parseInt(stored) : 5;
                } catch (error) {
                    console.error('Error loading daily goal:', error);
                    return 5;
                }
            }

            saveDailyGoal() {
                try {
                    localStorage.setItem('todoDailyGoal', this.dailyGoal.toString());
                } catch (error) {
                    console.error('Error saving daily goal:', error);
                }
            }

            // Subtask Management
            toggleSubtaskInput() {
                const subtasksInput = document.getElementById('subtasksInput');
                if (subtasksInput.style.display === 'none') {
                    subtasksInput.style.display = 'block';
                } else {
                    subtasksInput.style.display = 'none';
                }
                this.renderSubtaskInput();
            }

            addSubtaskItem() {
                const newSubtask = document.getElementById('newSubtask');
                const text = newSubtask.value.trim();
                if (text) {
                    this.subtasks.push({
                        id: Date.now(),
                        text: text,
                        completed: false
                    });
                    newSubtask.value = '';
                    this.renderSubtaskInput();
                }
            }

            removeSubtaskItem(index) {
                this.subtasks.splice(index, 1);
                this.renderSubtaskInput();
            }

            renderSubtaskInput() {
                const subtaskList = document.getElementById('subtaskList');
                subtaskList.innerHTML = this.subtasks.map((subtask, index) => `
                    <div class="subtask-item-input">
                        <input type="text" class="subtask-text-input" value="${this.escapeHtml(subtask.text)}" 
                               onchange="journalHub.todoApp.updateSubtaskText(${index}, this.value)">
                        <button type="button" class="subtask-remove" onclick="journalHub.todoApp.removeSubtaskItem(${index})">×</button>
                    </div>
                `).join('');
            }

            updateSubtaskText(index, newText) {
                if (this.subtasks[index]) {
                    this.subtasks[index].text = newText.trim();
                }
            }

            // Pomodoro Timer
            togglePomodoro() {
                const timer = document.getElementById('pomodoroTimer');
                if (timer.classList.contains('active')) {
                    timer.classList.remove('active');
                } else {
                    timer.classList.add('active');
                    this.resetPomodoro();
                }
            }

            startPomodoro() {
                if (!this.pomodoroActive) {
                    this.pomodoroActive = true;
                    this.pomodoroTimer = setInterval(() => {
                        if (this.pomodoroSeconds === 0) {
                            if (this.pomodoroMinutes === 0) {
                                this.pomodoroComplete();
                                return;
                            }
                            this.pomodoroMinutes--;
                            this.pomodoroSeconds = 59;
                        } else {
                            this.pomodoroSeconds--;
                        }
                        this.updatePomodoroDisplay();
                    }, 1000);
                }
            }

            pausePomodoro() {
                this.pomodoroActive = false;
                if (this.pomodoroTimer) {
                    clearInterval(this.pomodoroTimer);
                    this.pomodoroTimer = null;
                }
            }

            resetPomodoro() {
                this.pausePomodoro();
                this.pomodoroMinutes = 25;
                this.pomodoroSeconds = 0;
                this.updatePomodoroDisplay();
            }

            closePomodoro() {
                this.pausePomodoro();
                document.getElementById('pomodoroTimer').classList.remove('active');
            }

            updatePomodoroDisplay() {
                const display = document.getElementById('timerDisplay');
                const minutes = this.pomodoroMinutes.toString().padStart(2, '0');
                const seconds = this.pomodoroSeconds.toString().padStart(2, '0');
                display.textContent = `${minutes}:${seconds}`;
            }

            pomodoroComplete() {
                this.pausePomodoro();
                this.showSuccessMessage('🍅 Pomodoro session complete! Take a break!');
                this.checkAchievements();
            }

            // Habit Tracker
            toggleHabitTracker() {
                const tracker = document.getElementById('habitTracker');
                if (tracker.style.display === 'none') {
                    tracker.style.display = 'block';
                    this.renderHabitGrid();
                } else {
                    tracker.style.display = 'none';
                }
            }

            renderHabitGrid() {
                const grid = document.getElementById('habitGrid');
                const today = new Date();
                const days = [];
                
                // Generate last 7 days
                for (let i = 6; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    days.push(date);
                }

                grid.innerHTML = days.map(date => {
                    const dateStr = date.toISOString().split('T')[0];
                    const isToday = dateStr === today.toISOString().split('T')[0];
                    const isCompleted = this.habits.includes(dateStr);
                    
                    return `
                        <div class="habit-day ${isCompleted ? 'completed' : ''} ${isToday ? 'today' : ''}"
                             onclick="journalHub.todoApp.toggleHabit('${dateStr}')">
                            ${date.getDate()}
                        </div>
                    `;
                }).join('');
            }

            toggleHabit(dateStr) {
                const index = this.habits.indexOf(dateStr);
                if (index > -1) {
                    this.habits.splice(index, 1);
                } else {
                    this.habits.push(dateStr);
                }
                this.saveHabits();
                this.renderHabitGrid();
            }

            // Task Templates
            toggleTemplates() {
                const templates = document.getElementById('taskTemplates');
                if (templates.style.display === 'none') {
                    templates.style.display = 'block';
                } else {
                    templates.style.display = 'none';
                }
            }

            applyTemplate(templateType) {
                const templates = {
                    morning: {
                        tasks: [
                            { text: 'Morning exercise (30 min)', category: 'health', priority: 'high', timeEstimate: '30min' },
                            { text: 'Healthy breakfast', category: 'health', priority: 'medium', timeEstimate: '15min' },
                            { text: 'Plan the day', category: 'personal', priority: 'high', timeEstimate: '15min' }
                        ]
                    },
                    work: {
                        tasks: [
                            { text: 'Research project requirements', category: 'work', priority: 'high', timeEstimate: '1hr' },
                            { text: 'Create project plan', category: 'work', priority: 'high', timeEstimate: '2hr' },
                            { text: 'Execute first milestone', category: 'work', priority: 'medium', timeEstimate: '4hr' },
                            { text: 'Review and adjust plan', category: 'work', priority: 'low', timeEstimate: '30min' }
                        ]
                    },
                    shopping: {
                        tasks: [
                            { text: 'Buy groceries', category: 'shopping', priority: 'medium', timeEstimate: '1hr' },
                            { text: 'Household supplies', category: 'shopping', priority: 'low', timeEstimate: '30min' },
                            { text: 'Check pantry inventory', category: 'personal', priority: 'low', timeEstimate: '15min' }
                        ]
                    },
                    learning: {
                        tasks: [
                            { text: 'Study new topic (1 hour)', category: 'learning', priority: 'high', timeEstimate: '1hr' },
                            { text: 'Practice exercises', category: 'learning', priority: 'medium', timeEstimate: '30min' },
                            { text: 'Review and take notes', category: 'learning', priority: 'medium', timeEstimate: '30min' }
                        ]
                    },
                    health: {
                        tasks: [
                            { text: 'Workout session', category: 'health', priority: 'high', timeEstimate: '1hr' },
                            { text: 'Meal prep for the week', category: 'health', priority: 'medium', timeEstimate: '2hr' },
                            { text: 'Schedule health checkup', category: 'health', priority: 'low', timeEstimate: '15min' }
                        ]
                    },
                    creative: {
                        tasks: [
                            { text: 'Brainstorm ideas', category: 'personal', priority: 'high', timeEstimate: '30min' },
                            { text: 'Create first draft', category: 'personal', priority: 'medium', timeEstimate: '2hr' },
                            { text: 'Refine and polish', category: 'personal', priority: 'medium', timeEstimate: '1hr' }
                        ]
                    }
                };

                const template = templates[templateType];
                if (template) {
                    template.tasks.forEach(taskData => {
                        const task = {
                            id: Date.now() + Math.random(),
                            text: taskData.text,
                            priority: taskData.priority,
                            category: taskData.category,
                            completed: false,
                            dueDate: null,
                            timeEstimate: taskData.timeEstimate,
                            notes: null,
                            recurring: null,
                            subtasks: [],
                            tags: [],
                            energyLevel: null,
                            location: null,
                            createdAt: new Date().toISOString(),
                            completedAt: null
                        };
                        this.tasks.unshift(task);
                    });
                    
                    this.saveTasks();
                    this.renderTasks();
                    this.updateStats();
                    this.updateDashboard();
                    this.showSuccessMessage(`${template.tasks.length} tasks added from template!`);
                    document.getElementById('taskTemplates').style.display = 'none';
                }
            }

            // Focus Mode
            toggleFocusMode() {
                this.focusMode = !this.focusMode;
                const btn = document.getElementById('focusModeBtn');
                
                if (this.focusMode) {
                    btn.style.background = '#28a745';
                    btn.style.color = 'white';
                    btn.textContent = '🎯 Focus Mode ON';
                    document.body.style.filter = 'grayscale(50%)';
                    this.showSuccessMessage('Focus mode activated! Distractions minimized.');
                } else {
                    btn.style.background = 'white';
                    btn.style.color = '#4facfe';
                    btn.textContent = '🎯 Focus Mode';
                    document.body.style.filter = 'none';
                    this.showSuccessMessage('Focus mode deactivated.');
                }
            }

            // Storage methods for new features
            loadHabits() {
                try {
                    const stored = localStorage.getItem('todoHabits');
                    return stored ? JSON.parse(stored) : [];
                } catch (error) {
                    console.error('Error loading habits:', error);
                    return [];
                }
            }

            saveHabits() {
                try {
                    localStorage.setItem('todoHabits', JSON.stringify(this.habits));
                } catch (error) {
                    console.error('Error saving habits:', error);
                }
            }
        }

        class MoodJournalApp {
            constructor() {
                this.moods = this.loadMoods();
                this.currentMood = null;
                this.selectedFactors = [];
                this.initializeEventListeners();
                this.updateDashboard();
            }

            initializeEventListeners() {
                // Quick mood buttons
                document.querySelectorAll('.quick-mood-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.selectMood(e.target.dataset.mood, e.target.dataset.emoji, e.target.dataset.name);
                    });
                });

                // Factor tags
                document.querySelectorAll('.factor-tag').forEach(tag => {
                    tag.addEventListener('click', (e) => {
                        this.toggleFactor(e.target.dataset.factor, e.target);
                    });
                });

                // Energy slider
                document.getElementById('energySlider').addEventListener('input', (e) => {
                    document.getElementById('energyValue').textContent = e.target.value;
                });

                // Form submission
                document.getElementById('moodForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveMoodEntry();
                });

                // View history button
                document.getElementById('viewMoodHistoryBtn').addEventListener('click', () => {
                    this.showHistoryView();
                });

                // New entry button
                document.getElementById('newMoodEntryBtn').addEventListener('click', () => {
                    this.showNewEntryView();
                });
            }

            selectMood(mood, emoji, name) {
                this.currentMood = { mood, emoji, name };
                
                // Update UI
                document.querySelectorAll('.quick-mood-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                event.target.classList.add('selected');
                
                // Update current mood display
                document.getElementById('currentMoodDisplay').textContent = emoji;
                document.getElementById('currentMoodName').textContent = name;
            }

            toggleFactor(factor, element) {
                const index = this.selectedFactors.indexOf(factor);
                if (index > -1) {
                    this.selectedFactors.splice(index, 1);
                    element.classList.remove('selected');
                } else {
                    this.selectedFactors.push(factor);
                    element.classList.add('selected');
                }
            }

            saveMoodEntry() {
                if (!this.currentMood) {
                    alert('Please select your mood first!');
                    return;
                }

                const entry = {
                    id: Date.now(),
                    mood: this.currentMood.mood,
                    emoji: this.currentMood.emoji,
                    name: this.currentMood.name,
                    factors: [...this.selectedFactors],
                    notes: document.getElementById('moodNotes').value.trim(),
                    energy: parseInt(document.getElementById('energySlider').value),
                    date: new Date().toISOString(),
                    timestamp: new Date().toLocaleString()
                };

                this.moods.unshift(entry);
                this.saveMoods();
                this.updateDashboard();
                this.showSuccessMessage('Mood entry saved successfully!');
                this.clearForm();
            }

            clearForm() {
                document.querySelectorAll('.quick-mood-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                document.querySelectorAll('.factor-tag').forEach(tag => {
                    tag.classList.remove('selected');
                });
                document.getElementById('moodNotes').value = '';
                document.getElementById('energySlider').value = 5;
                document.getElementById('energyValue').textContent = 5;
                this.currentMood = null;
                this.selectedFactors = [];
            }

            updateDashboard() {
                // Update streak
                const streak = this.calculateStreak();
                document.getElementById('moodStreak').textContent = streak;

                // Update weekly average
                const weeklyAvg = this.calculateWeeklyAverage();
                if (weeklyAvg) {
                    document.getElementById('weeklyMood').textContent = weeklyAvg.emoji;
                    document.getElementById('weeklyMoodName').textContent = weeklyAvg.name;
                }
            }

            calculateStreak() {
                if (this.moods.length === 0) return 0;
                
                let streak = 0;
                const today = new Date();
                
                for (let i = 0; i < 30; i++) {
                    const checkDate = new Date(today);
                    checkDate.setDate(checkDate.getDate() - i);
                    const dateStr = checkDate.toISOString().split('T')[0];
                    
                    const hasEntry = this.moods.some(mood => 
                        mood.date.split('T')[0] === dateStr
                    );
                    
                    if (hasEntry) {
                        streak++;
                    } else {
                        break;
                    }
                }
                
                return streak;
            }

            calculateWeeklyAverage() {
                const weekAgo = new Date();
                weekAgo.setDate(weekAgo.getDate() - 7);
                
                const weeklyMoods = this.moods.filter(mood => 
                    new Date(mood.date) >= weekAgo
                );
                
                if (weeklyMoods.length === 0) return null;
                
                const moodValues = {
                    terrible: 1, sad: 2, meh: 3, neutral: 4, 
                    good: 5, happy: 6, amazing: 7
                };
                
                const avgValue = weeklyMoods.reduce((sum, mood) => 
                    sum + (moodValues[mood.mood] || 4), 0
                ) / weeklyMoods.length;
                
                const moodNames = ['', 'terrible', 'sad', 'meh', 'neutral', 'good', 'happy', 'amazing'];
                const moodEmojis = ['', '😢', '😔', '😕', '😐', '🙂', '😊', '😄'];
                
                const roundedValue = Math.round(avgValue);
                return {
                    emoji: moodEmojis[roundedValue],
                    name: moodNames[roundedValue].charAt(0).toUpperCase() + moodNames[roundedValue].slice(1)
                };
            }

            showHistoryView() {
                document.querySelector('.mood-dashboard').style.display = 'none';
                document.querySelector('.quick-mood-section').style.display = 'none';
                document.querySelector('.detailed-mood-section').style.display = 'none';
                document.querySelector('.view-entries-section').style.display = 'none';
                document.getElementById('moodHistorySection').style.display = 'block';
                this.renderMoodHistory();
            }

            showNewEntryView() {
                document.querySelector('.mood-dashboard').style.display = 'grid';
                document.querySelector('.quick-mood-section').style.display = 'block';
                document.querySelector('.detailed-mood-section').style.display = 'block';
                document.querySelector('.view-entries-section').style.display = 'block';
                document.getElementById('moodHistorySection').style.display = 'none';
            }

            renderMoodHistory() {
                const entriesList = document.getElementById('moodEntriesList');
                
                if (this.moods.length === 0) {
                    entriesList.innerHTML = '<div class="no-tasks">💭 No mood entries yet. Start tracking your mood above!</div>';
                    return;
                }

                entriesList.innerHTML = this.moods.map(entry => `
                    <div class="mood-entry-item">
                        <div class="mood-entry-header">
                            <div class="mood-entry-title">
                                <span class="mood-entry-emoji">${entry.emoji}</span>
                                <span class="mood-entry-name">${entry.name}</span>
                            </div>
                            <div class="mood-entry-actions">
                                <span class="mood-entry-date">${entry.timestamp}</span>
                                <button class="mood-delete-btn" onclick="journalHub.moodJournalApp.deleteEntry(${entry.id})">🗑️</button>
                            </div>
                        </div>
                        ${entry.factors.length > 0 ? `
                            <div class="mood-factors-display">
                                <strong>Influenced by:</strong> ${entry.factors.join(', ')}
                            </div>
                        ` : ''}
                        <div class="mood-energy-display">
                            <strong>Energy Level:</strong> ${entry.energy}/10
                        </div>
                        ${entry.notes ? `
                            <div class="mood-notes-display">
                                <strong>Notes:</strong>
                                <p>${this.escapeHtml(entry.notes)}</p>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }

            deleteEntry(entryId) {
                this.moods = this.moods.filter(m => m.id !== entryId);
                this.saveMoods();
                this.updateDashboard();
                this.renderMoodHistory();
                this.showSuccessMessage('Mood entry deleted successfully!');
            }

            showSuccessMessage(message) {
                const messageEl = document.getElementById('moodSuccessMessage');
                messageEl.textContent = message;
                messageEl.style.display = 'block';
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, 3000);
            }

            loadMoods() {
                try {
                    const stored = localStorage.getItem('moodEntries');
                    return stored ? JSON.parse(stored) : [];
                } catch (error) {
                    console.error('Error loading moods:', error);
                    return [];
                }
            }

            saveMoods() {
                try {
                    localStorage.setItem('moodEntries', JSON.stringify(this.moods));
                } catch (error) {
                    console.error('Error saving moods:', error);
                }
            }
        }

        class HabitTrackerApp {
            constructor() {
                this.habits = this.loadHabits();
                this.initializeEventListeners();
                this.updateDashboard();
                this.renderHabits();
            }

            initializeEventListeners() {
                document.getElementById('habitForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addHabit();
                });

                // View habits button
                document.getElementById('viewHabitsBtn').addEventListener('click', () => {
                    this.showHabitsView();
                });

                // New habit button
                document.getElementById('newHabitEntryBtn').addEventListener('click', () => {
                    this.showNewHabitView();
                });
            }

            addHabit() {
                const habitInput = document.getElementById('habitInput');
                const habitCategory = document.getElementById('habitCategory');
                const frequency = document.querySelector('input[name="frequency"]:checked').value;

                const habitText = habitInput.value.trim();
                if (!habitText) {
                    alert('Please enter a habit!');
                    return;
                }

                const habit = {
                    id: Date.now(),
                    text: habitText,
                    category: habitCategory.value,
                    frequency: frequency,
                    createdAt: new Date().toISOString(),
                    completions: []
                };

                this.habits.unshift(habit);
                this.saveHabits();
                this.updateDashboard();
                this.renderHabits();
                this.showSuccessMessage('Habit added successfully!');
                
                habitInput.value = '';
            }

            updateDashboard() {
                document.getElementById('activeHabitsCount').textContent = this.habits.length;
                
                const bestStreak = this.calculateBestStreak();
                document.getElementById('bestStreak').textContent = bestStreak;
                
                const completionRate = this.calculateCompletionRate();
                document.getElementById('completionRate').textContent = `${completionRate}%`;
            }

            calculateBestStreak() {
                return Math.max(...this.habits.map(habit => this.getHabitStreak(habit)), 0);
            }

            calculateCompletionRate() {
                if (this.habits.length === 0) return 0;
                
                const today = new Date().toISOString().split('T')[0];
                const completedToday = this.habits.filter(habit => 
                    habit.completions.includes(today)
                ).length;
                
                return Math.round((completedToday / this.habits.length) * 100);
            }

            getHabitStreak(habit) {
                let streak = 0;
                const today = new Date();
                
                for (let i = 0; i < 365; i++) {
                    const checkDate = new Date(today);
                    checkDate.setDate(checkDate.getDate() - i);
                    const dateStr = checkDate.toISOString().split('T')[0];
                    
                    if (habit.completions.includes(dateStr)) {
                        streak++;
                    } else {
                        break;
                    }
                }
                
                return streak;
            }

            renderHabits() {
                const habitsGrid = document.getElementById('habitsGrid');
                
                if (this.habits.length === 0) {
                    habitsGrid.innerHTML = '<div class="no-tasks">📋 No habits yet. Add your first habit above!</div>';
                    return;
                }

                habitsGrid.innerHTML = this.habits.map(habit => {
                    const today = new Date().toISOString().split('T')[0];
                    const isCompletedToday = habit.completions.includes(today);
                    const streak = this.getHabitStreak(habit);
                    
                    return `
                        <div class="habit-card">
                            <div class="habit-header">
                                <h3>${this.escapeHtml(habit.text)}</h3>
                                <button class="habit-delete-btn" onclick="journalHub.habitTrackerApp.deleteHabit(${habit.id})">🗑️</button>
                            </div>
                            <div class="habit-meta">
                                <span class="habit-category">${habit.category}</span>
                                <span class="habit-frequency">${habit.frequency}</span>
                            </div>
                            <div class="habit-stats">
                                <div class="habit-streak">🔥 ${streak} day streak</div>
                                <div class="habit-completion-rate">${Math.round((habit.completions.length / Math.max(1, this.getDaysSinceCreation(habit))) * 100)}% completion</div>
                            </div>
                            <button class="habit-toggle-btn ${isCompletedToday ? 'completed' : ''}" 
                                    onclick="journalHub.habitTrackerApp.toggleHabitCompletion(${habit.id})">
                                ${isCompletedToday ? '✅ Completed Today' : '⭕ Mark Complete'}
                            </button>
                        </div>
                    `;
                }).join('');
            }

            getDaysSinceCreation(habit) {
                const created = new Date(habit.createdAt);
                const today = new Date();
                return Math.ceil((today - created) / (1000 * 60 * 60 * 24));
            }

            toggleHabitCompletion(habitId) {
                const habit = this.habits.find(h => h.id === habitId);
                if (!habit) return;

                const today = new Date().toISOString().split('T')[0];
                const index = habit.completions.indexOf(today);
                
                if (index > -1) {
                    habit.completions.splice(index, 1);
                } else {
                    habit.completions.push(today);
                }
                
                this.saveHabits();
                this.updateDashboard();
                this.renderHabits();
                this.showSuccessMessage(index > -1 ? 'Habit unmarked for today' : 'Habit completed for today!');
            }

            deleteHabit(habitId) {
                this.habits = this.habits.filter(h => h.id !== habitId);
                this.saveHabits();
                this.updateDashboard();
                this.renderHabits();
                this.showSuccessMessage('Habit deleted successfully!');
            }

            showHabitsView() {
                document.querySelector('.habit-stats-dashboard').style.display = 'none';
                document.querySelector('.new-habit-section').style.display = 'none';
                document.querySelector('.view-entries-section').style.display = 'none';
                document.getElementById('habitsSection').style.display = 'block';
            }

            showNewHabitView() {
                document.querySelector('.habit-stats-dashboard').style.display = 'grid';
                document.querySelector('.new-habit-section').style.display = 'block';
                document.querySelector('.view-entries-section').style.display = 'block';
                document.getElementById('habitsSection').style.display = 'none';
            }

            showSuccessMessage(message) {
                const messageEl = document.getElementById('habitSuccessMessage');
                messageEl.textContent = message;
                messageEl.style.display = 'block';
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, 3000);
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            loadHabits() {
                try {
                    const stored = localStorage.getItem('habitTrackerData');
                    return stored ? JSON.parse(stored) : [];
                } catch (error) {
                    console.error('Error loading habits:', error);
                    return [];
                }
            }

            saveHabits() {
                try {
                    localStorage.setItem('habitTrackerData', JSON.stringify(this.habits));
                } catch (error) {
                    console.error('Error saving habits:', error);
                }
            }
        }

        class GoalPlannerApp {
            constructor() {
                this.goals = this.loadGoals();
                this.milestones = [];
                this.currentFilter = 'all';
                this.initializeEventListeners();
                this.updateDashboard();
                this.renderGoals();
            }

            initializeEventListeners() {
                document.getElementById('goalForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addGoal();
                });

                document.querySelector('.add-milestone-btn').addEventListener('click', () => {
                    this.addMilestone();
                });

                document.querySelectorAll('.goal-filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.setFilter(e.target.dataset.filter);
                    });
                });

                // View goals button
                document.getElementById('viewGoalsBtn').addEventListener('click', () => {
                    this.showGoalsView();
                });

                // New goal button
                document.getElementById('newGoalEntryBtn').addEventListener('click', () => {
                    this.showNewGoalView();
                });
            }

            addMilestone() {
                const milestoneText = document.querySelector('.milestone-text');
                const text = milestoneText.value.trim();
                
                if (text) {
                    this.milestones.push({
                        id: Date.now(),
                        text: text,
                        completed: false
                    });
                    milestoneText.value = '';
                    this.renderMilestones();
                }
            }

            renderMilestones() {
                const container = document.getElementById('milestonesContainer');
                const milestonesHtml = this.milestones.map(milestone => `
                    <div class="milestone-item">
                        <input type="checkbox" ${milestone.completed ? 'checked' : ''} 
                               onchange="journalHub.goalPlannerApp.toggleMilestone(${milestone.id})">
                        <span class="milestone-text-display ${milestone.completed ? 'completed' : ''}">${this.escapeHtml(milestone.text)}</span>
                        <button type="button" onclick="journalHub.goalPlannerApp.removeMilestone(${milestone.id})">×</button>
                    </div>
                `).join('');
                
                container.innerHTML = milestonesHtml + `
                    <div class="milestone-input">
                        <input type="text" placeholder="Add a milestone..." class="milestone-text">
                        <button type="button" class="add-milestone-btn">+</button>
                    </div>
                `;
                
                // Re-attach event listener
                container.querySelector('.add-milestone-btn').addEventListener('click', () => {
                    this.addMilestone();
                });
            }

            toggleMilestone(milestoneId) {
                const milestone = this.milestones.find(m => m.id === milestoneId);
                if (milestone) {
                    milestone.completed = !milestone.completed;
                    this.renderMilestones();
                }
            }

            removeMilestone(milestoneId) {
                this.milestones = this.milestones.filter(m => m.id !== milestoneId);
                this.renderMilestones();
            }

            addGoal() {
                const goalTitle = document.getElementById('goalTitle').value.trim();
                const goalCategory = document.getElementById('goalCategory').value;
                const goalTimeframe = document.getElementById('goalTimeframe').value;
                const goalDeadline = document.getElementById('goalDeadline').value;
                const goalDescription = document.getElementById('goalDescription').value.trim();

                if (!goalTitle) {
                    alert('Please enter a goal title!');
                    return;
                }

                const goal = {
                    id: Date.now(),
                    title: goalTitle,
                    category: goalCategory,
                    timeframe: goalTimeframe,
                    deadline: goalDeadline || null,
                    description: goalDescription,
                    milestones: [...this.milestones],
                    completed: false,
                    createdAt: new Date().toISOString(),
                    completedAt: null
                };

                this.goals.unshift(goal);
                this.saveGoals();
                this.updateDashboard();
                this.renderGoals();
                this.showSuccessMessage('Goal created successfully!');
                this.clearForm();
            }

            clearForm() {
                document.getElementById('goalTitle').value = '';
                document.getElementById('goalDescription').value = '';
                document.getElementById('goalDeadline').value = '';
                this.milestones = [];
                this.renderMilestones();
            }

            setFilter(filter) {
                this.currentFilter = filter;
                
                document.querySelectorAll('.goal-filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
                
                this.renderGoals();
            }

            getFilteredGoals() {
                switch (this.currentFilter) {
                    case 'active':
                        return this.goals.filter(goal => !goal.completed);
                    case 'completed':
                        return this.goals.filter(goal => goal.completed);
                    case 'overdue':
                        return this.goals.filter(goal => this.isOverdue(goal));
                    default:
                        return this.goals;
                }
            }

            isOverdue(goal) {
                if (!goal.deadline || goal.completed) return false;
                return new Date(goal.deadline) < new Date();
            }

            renderGoals() {
                const goalsList = document.getElementById('goalsList');
                const filteredGoals = this.getFilteredGoals();
                
                if (filteredGoals.length === 0) {
                    goalsList.innerHTML = '<div class="no-tasks">🎯 No goals found. Create your first goal above!</div>';
                    return;
                }

                goalsList.innerHTML = filteredGoals.map(goal => {
                    const isOverdue = this.isOverdue(goal);
                    const completedMilestones = goal.milestones.filter(m => m.completed).length;
                    const totalMilestones = goal.milestones.length;
                    const progress = totalMilestones > 0 ? (completedMilestones / totalMilestones) * 100 : 0;
                    
                    return `
                        <div class="goal-item ${goal.completed ? 'completed' : ''} ${isOverdue ? 'overdue' : ''}">
                            <div class="goal-header">
                                <h3>${this.escapeHtml(goal.title)}</h3>
                                <div class="goal-actions">
                                    <button class="goal-toggle-btn" onclick="journalHub.goalPlannerApp.toggleGoal(${goal.id})">
                                        ${goal.completed ? '↩️' : '✅'}
                                    </button>
                                    <button class="goal-delete-btn" onclick="journalHub.goalPlannerApp.deleteGoal(${goal.id})">🗑️</button>
                                </div>
                            </div>
                            <div class="goal-meta">
                                <span class="goal-category">${goal.category}</span>
                                <span class="goal-timeframe">${goal.timeframe}</span>
                                ${goal.deadline ? `<span class="goal-deadline ${isOverdue ? 'overdue' : ''}">📅 ${new Date(goal.deadline).toLocaleDateString()}</span>` : ''}
                            </div>
                            ${goal.description ? `<div class="goal-description">${this.escapeHtml(goal.description)}</div>` : ''}
                            ${totalMilestones > 0 ? `
                                <div class="goal-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: ${progress}%"></div>
                                    </div>
                                    <div class="progress-text">${completedMilestones}/${totalMilestones} milestones completed</div>
                                </div>
                            ` : ''}
                        </div>
                    `;
                }).join('');
            }

            toggleGoal(goalId) {
                const goal = this.goals.find(g => g.id === goalId);
                if (goal) {
                    goal.completed = !goal.completed;
                    goal.completedAt = goal.completed ? new Date().toISOString() : null;
                    
                    this.saveGoals();
                    this.updateDashboard();
                    this.renderGoals();
                    this.showSuccessMessage(goal.completed ? 'Goal completed! 🎉' : 'Goal marked as active');
                }
            }

            deleteGoal(goalId) {
                this.goals = this.goals.filter(g => g.id !== goalId);
                this.saveGoals();
                this.updateDashboard();
                this.renderGoals();
                this.showSuccessMessage('Goal deleted successfully!');
            }

            updateDashboard() {
                const activeGoals = this.goals.filter(g => !g.completed).length;
                const completedGoals = this.goals.filter(g => g.completed).length;
                const totalGoals = this.goals.length;
                const successRate = totalGoals > 0 ? Math.round((completedGoals / totalGoals) * 100) : 0;

                document.getElementById('activeGoalsCount').textContent = activeGoals;
                document.getElementById('completedGoalsCount').textContent = completedGoals;
                document.getElementById('goalSuccessRate').textContent = `${successRate}%`;
            }

            showGoalsView() {
                document.querySelector('.goals-dashboard').style.display = 'none';
                document.querySelector('.new-goal-section').style.display = 'none';
                document.querySelector('.view-entries-section').style.display = 'none';
                document.getElementById('goalsSection').style.display = 'block';
            }

            showNewGoalView() {
                document.querySelector('.goals-dashboard').style.display = 'grid';
                document.querySelector('.new-goal-section').style.display = 'block';
                document.querySelector('.view-entries-section').style.display = 'block';
                document.getElementById('goalsSection').style.display = 'none';
            }

            showSuccessMessage(message) {
                const messageEl = document.getElementById('goalSuccessMessage');
                messageEl.textContent = message;
                messageEl.style.display = 'block';
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, 3000);
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            loadGoals() {
                try {
                    const stored = localStorage.getItem('goalPlannerData');
                    return stored ? JSON.parse(stored) : [];
                } catch (error) {
                    console.error('Error loading goals:', error);
                    return [];
                }
            }

            saveGoals() {
                try {
                    localStorage.setItem('goalPlannerData', JSON.stringify(this.goals));
                } catch (error) {
                    console.error('Error saving goals:', error);
                }
            }
        }

        class GratitudeJournalApp {
            constructor() {
                this.entries = this.loadEntries();
                this.initializeEventListeners();
                this.updateDashboard();
                this.renderEntries();
            }

            initializeEventListeners() {
                document.getElementById('gratitudeForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveGratitudeEntry();
                });

                // View history button
                document.getElementById('viewGratitudeHistoryBtn').addEventListener('click', () => {
                    this.showHistoryView();
                });

                // New entry button
                document.getElementById('newGratitudeEntryBtn').addEventListener('click', () => {
                    this.showNewEntryView();
                });
            }

            saveGratitudeEntry() {
                const gratitude1 = document.getElementById('gratitude1').value.trim();
                const gratitude2 = document.getElementById('gratitude2').value.trim();
                const gratitude3 = document.getElementById('gratitude3').value.trim();
                const reflection = document.getElementById('gratitudeReflection').value.trim();

                if (!gratitude1 && !gratitude2 && !gratitude3) {
                    alert('Please fill in at least one gratitude item!');
                    return;
                }

                const entry = {
                    id: Date.now(),
                    gratitudes: [gratitude1, gratitude2, gratitude3].filter(g => g),
                    reflection: reflection,
                    date: new Date().toISOString(),
                    timestamp: new Date().toLocaleString()
                };

                this.entries.unshift(entry);
                this.saveEntries();
                this.updateDashboard();
                this.renderEntries();
                this.showSuccessMessage('Gratitude entry saved successfully!');
                this.clearForm();
            }

            clearForm() {
                document.getElementById('gratitude1').value = '';
                document.getElementById('gratitude2').value = '';
                document.getElementById('gratitude3').value = '';
                document.getElementById('gratitudeReflection').value = '';
            }

            updateDashboard() {
                const totalEntries = this.entries.length;
                const streak = this.calculateStreak();
                const positiveVibes = this.entries.reduce((sum, entry) => sum + entry.gratitudes.length, 0);

                document.getElementById('gratitudeEntriesCount').textContent = totalEntries;
                document.getElementById('gratitudeStreak').textContent = streak;
                document.getElementById('positiveVibes').textContent = positiveVibes;
            }

            calculateStreak() {
                if (this.entries.length === 0) return 0;
                
                let streak = 0;
                const today = new Date();
                
                for (let i = 0; i < 365; i++) {
                    const checkDate = new Date(today);
                    checkDate.setDate(checkDate.getDate() - i);
                    const dateStr = checkDate.toISOString().split('T')[0];
                    
                    const hasEntry = this.entries.some(entry => 
                        entry.date.split('T')[0] === dateStr
                    );
                    
                    if (hasEntry) {
                        streak++;
                    } else {
                        break;
                    }
                }
                
                return streak;
            }

            renderEntries() {
                const entriesContainer = document.getElementById('gratitudeEntries');
                
                if (this.entries.length === 0) {
                    entriesContainer.innerHTML = '<div class="no-tasks">🙏 No gratitude entries yet. Start your gratitude practice above!</div>';
                    return;
                }

                entriesContainer.innerHTML = this.entries.map(entry => `
                    <div class="gratitude-entry-item">
                        <div class="gratitude-entry-header">
                            <h3>✨ Gratitude Entry</h3>
                            <div class="gratitude-entry-actions">
                                <span class="gratitude-entry-date">${entry.timestamp}</span>
                                <button class="gratitude-delete-btn" onclick="journalHub.gratitudeJournalApp.deleteEntry(${entry.id})">🗑️</button>
                            </div>
                        </div>
                        <div class="gratitude-items">
                            ${entry.gratitudes.map((gratitude, index) => `
                                <div class="gratitude-item-display">
                                    <span class="gratitude-icon">${['🌟', '💝', '🎉'][index] || '✨'}</span>
                                    <span class="gratitude-text">${this.escapeHtml(gratitude)}</span>
                                </div>
                            `).join('')}
                        </div>
                        ${entry.reflection ? `
                            <div class="gratitude-reflection-display">
                                <strong>💭 Reflection:</strong>
                                <p>${this.escapeHtml(entry.reflection)}</p>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }

            deleteEntry(entryId) {
                this.entries = this.entries.filter(e => e.id !== entryId);
                this.saveEntries();
                this.updateDashboard();
                this.renderEntries();
                this.showSuccessMessage('Gratitude entry deleted successfully!');
            }

            showHistoryView() {
                document.querySelector('.gratitude-dashboard').style.display = 'none';
                document.querySelector('.daily-gratitude-section').style.display = 'none';
                document.querySelector('.view-entries-section').style.display = 'none';
                document.getElementById('gratitudeHistorySection').style.display = 'block';
            }

            showNewEntryView() {
                document.querySelector('.gratitude-dashboard').style.display = 'grid';
                document.querySelector('.daily-gratitude-section').style.display = 'block';
                document.querySelector('.view-entries-section').style.display = 'block';
                document.getElementById('gratitudeHistorySection').style.display = 'none';
            }

            showSuccessMessage(message) {
                const messageEl = document.getElementById('gratitudeSuccessMessage');
                messageEl.textContent = message;
                messageEl.style.display = 'block';
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, 3000);
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            loadEntries() {
                try {
                    const stored = localStorage.getItem('gratitudeEntries');
                    return stored ? JSON.parse(stored) : [];
                } catch (error) {
                    console.error('Error loading gratitude entries:', error);
                    return [];
                }
            }

            saveEntries() {
                try {
                    localStorage.setItem('gratitudeEntries', JSON.stringify(this.entries));
                } catch (error) {
                    console.error('Error saving gratitude entries:', error);
                }
            }
        }

        class LifeAnalyticsApp {
            constructor() {
                this.initializeAnalytics();
            }

            initializeAnalytics() {
                this.calculateRealTimeAnalytics();
            }

            calculateRealTimeAnalytics() {
                // Get data from other apps
                const todoData = this.getTodoData();
                const moodData = this.getMoodData();
                const habitData = this.getHabitData();
                const goalData = this.getGoalData();
                const gratitudeData = this.getGratitudeData();

                // Update dashboard with real data
                this.updateProductivityScore(todoData);
                this.updateMoodAnalytics(moodData);
                this.updateHabitAnalytics(habitData);
                this.updateGoalAnalytics(goalData);
                this.updateRecommendations(todoData, moodData, habitData, goalData);
            }

            getTodoData() {
                try {
                    const tasks = JSON.parse(localStorage.getItem('todoTasks') || '[]');
                    const completedTasks = tasks.filter(t => t.completed);
                    const totalTasks = tasks.length;
                    
                    return {
                        tasks,
                        completedTasks,
                        totalTasks,
                        completionRate: totalTasks > 0 ? Math.round((completedTasks.length / totalTasks) * 100) : 0
                    };
                } catch (error) {
                    return { tasks: [], completedTasks: [], totalTasks: 0, completionRate: 0 };
                }
            }

            getMoodData() {
                try {
                    const moods = JSON.parse(localStorage.getItem('moodEntries') || '[]');
                    const moodValues = { terrible: 1, sad: 2, meh: 3, neutral: 4, good: 5, happy: 6, amazing: 7 };
                    
                    if (moods.length === 0) return { moods: [], averageMood: 4, distribution: {} };
                    
                    const avgMood = moods.reduce((sum, mood) => sum + (moodValues[mood.mood] || 4), 0) / moods.length;
                    
                    // Calculate distribution
                    const distribution = {};
                    moods.forEach(mood => {
                        distribution[mood.mood] = (distribution[mood.mood] || 0) + 1;
                    });
                    
                    return { moods, averageMood: avgMood.toFixed(1), distribution };
                } catch (error) {
                    return { moods: [], averageMood: 4, distribution: {} };
                }
            }

            getHabitData() {
                try {
                    const habits = JSON.parse(localStorage.getItem('habitTrackerData') || '[]');
                    const today = new Date().toISOString().split('T')[0];
                    
                    let totalCompletions = 0;
                    let totalPossible = 0;
                    
                    habits.forEach(habit => {
                        totalPossible++;
                        if (habit.completions && habit.completions.includes(today)) {
                            totalCompletions++;
                        }
                    });
                    
                    return {
                        habits,
                        todayCompletionRate: totalPossible > 0 ? Math.round((totalCompletions / totalPossible) * 100) : 0,
                        totalHabits: habits.length
                    };
                } catch (error) {
                    return { habits: [], todayCompletionRate: 0, totalHabits: 0 };
                }
            }

            getGoalData() {
                try {
                    const goals = JSON.parse(localStorage.getItem('goalPlannerData') || '[]');
                    const activeGoals = goals.filter(g => !g.completed);
                    const completedGoals = goals.filter(g => g.completed);
                    
                    return {
                        goals,
                        activeGoals: activeGoals.length,
                        completedGoals: completedGoals.length,
                        totalGoals: goals.length
                    };
                } catch (error) {
                    return { goals: [], activeGoals: 0, completedGoals: 0, totalGoals: 0 };
                }
            }

            getGratitudeData() {
                try {
                    const entries = JSON.parse(localStorage.getItem('gratitudeEntries') || '[]');
                    return { entries, totalEntries: entries.length };
                } catch (error) {
                    return { entries: [], totalEntries: 0 };
                }
            }

            updateProductivityScore(todoData) {
                const score = todoData.completionRate;
                document.getElementById('productivityScore').textContent = `${score}%`;
                
                const trend = score >= 80 ? '↗️ Excellent!' : score >= 60 ? '→ Good pace' : '↘️ Room to improve';
                document.getElementById('productivityTrend').textContent = trend;
            }

            updateMoodAnalytics(moodData) {
                document.getElementById('averageMood').textContent = `${moodData.averageMood}/10`;
                
                const moodEmojis = { 1: '😢', 2: '😔', 3: '😕', 4: '😐', 5: '🙂', 6: '😊', 7: '😄' };
                const avgMoodRounded = Math.round(parseFloat(moodData.averageMood));
                const trendEmoji = moodEmojis[avgMoodRounded] || '😐';
                
                document.getElementById('moodTrend').textContent = `${trendEmoji} ${avgMoodRounded >= 5 ? 'Positive trend' : 'Focus on wellness'}`;
            }

            updateHabitAnalytics(habitData) {
                document.getElementById('habitSuccess').textContent = `${habitData.todayCompletionRate}%`;
                
                const trend = habitData.todayCompletionRate >= 80 ? '🔥 On fire!' : 
                             habitData.todayCompletionRate >= 50 ? '📈 Building momentum' : '💪 Keep going!';
                document.getElementById('habitTrend').textContent = trend;
            }

            updateGoalAnalytics(goalData) {
                document.getElementById('goalProgress').textContent = `${goalData.completedGoals}/${goalData.totalGoals}`;
                
                const progress = goalData.totalGoals > 0 ? (goalData.completedGoals / goalData.totalGoals) * 100 : 0;
                const trend = progress >= 50 ? '🎯 On track' : progress >= 25 ? '📊 Making progress' : '🚀 Just getting started';
                document.getElementById('goalTrend').textContent = trend;
            }

            updateRecommendations(todoData, moodData, habitData, goalData) {
                // This could be enhanced with more sophisticated analysis
                // For now, we'll keep the static recommendations as they provide good general advice
                
                // You could add dynamic recommendations based on the data:
                // - If mood is consistently low, recommend mood-boosting activities
                // - If productivity is low, recommend time management techniques
                // - If habit completion is low, recommend starting with smaller habits
                // - If goals are stagnant, recommend breaking them into smaller milestones
            }
        }

        // Initialize the journal hub when the page loads
        let journalHub;
        document.addEventListener('DOMContentLoaded', () => {
            journalHub = new JournalHub();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98aaa891115ea843',t:'MTc1OTgxMTM3Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
